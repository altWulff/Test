var _i_=this._i_||function(){},_r_=this._r_||function(e){return e};B.Search.rawGroupConfiguration,B.Search.groupConfiguration,B.Search.childrenConfiguration,B.Search.createGroup=function(e){if(_i_("9fc:843c11fe"),!e||"object"!=typeof e)return _r_(new B.Search.InvalidGroup);return _r_(new B.Search.Group(e))},B.Search.AbstractGroup=function(){},B.Search.AbstractGroup.prototype.parseChildrenConfig=function(e){_i_("9fc:d51dca3f");var t,a=[];return!e.childrenAges&&e.childrenages&&(e.childrenAges=e.childrenages),e.childrenAges instanceof Array?a=e.childrenAges:"number"==typeof e.childrenAges?a=[e.childrenAges]:"string"==typeof e.childrenAges?a=e.childrenAges.split(","):e.children instanceof Array?a=e.children:void 0!==e.children?(t=parseInt(e.children,10),a=isNaN(t)?[]:new Array(t)):a=[],_r_({childrenAges:a,children:a.length})},B.Search.AbstractGroup.prototype.parseConfig=function(e,t){_i_("9fc:c8b06066");var a={};return e.adults&&(a.adults=e.adults),e.rooms&&(a.rooms=e.rooms),0===a.rooms&&(a.rooms=1),$.extend(a,this.parseChildrenConfig(e)),e.name&&(a.name=e.name),e.type&&(a.type=e.type),t&&t.useDefaults&&(a=$.extend({adults:2,rooms:1,children:0,childrenAges:[]},a)),_r_(a)},B.Search.AbstractGroup.prototype.applyConfig=function(e){var t;_i_("9fc:d597ed67"),e.name!==t&&(this.name=e.name),e.type!==t&&(this.type=e.type),e.rooms!==t&&(this.rooms=e.rooms),e.adults!==t&&(this.adults=e.adults),e.children!==t&&(this.children=e.children),e.childrenAges!==t&&(this.childrenAges=e.childrenAges),_r_()},B.Search.InvalidGroup=function(){},B.Search.InvalidGroup.prototype=new B.Search.AbstractGroup,B.Search.InvalidGroup.prototype.valueOf=function(){return _i_("9fc:b5954b79"),_r_(null)},B.Search.Group=function(e){_i_("9fc:5187a580");var t=this.parseConfig(e,{useDefaults:!0});this.applyConfig(t),_r_()},B.Search.Group.prototype=new B.Search.AbstractGroup,B.Search.Group.prototype.update=function(e){_i_("9fc:2334f03d");var t=this.parseConfig(e);return this.applyConfig(t),_r_(this)},B.Search.Group.prototype.toString=function(){return _i_("9fc:80448317"),_r_(this.valueOf())},B.Search.Group.prototype.valueOf=function(){_i_("9fc:f7ff1e3c");var e=["Group:"];return this.name&&e.push("Name: "+this.name),this.type&&e.push("Type: "+this.type),e.push(this.rooms),e.push(this.adults),e.push(this.children),e.push(this.childrenAges.join("|")),_r_(e.join(","))},B.Search.ONE_DAY=864e5,B.Search.createDate=function(e){var t,a,r,i,n,o,s,c;switch(_i_("9fc:e9cad46c"),typeof e){case"string":1<(c=e.split("-")).length&&(t=parseInt(c[0],10),a=parseInt(c[1],10)-1),3===c.length&&(r=parseInt(c[2],10));break;case"object":t=parseInt(e.year,10),a=parseInt(e.month,10),r=parseInt("day"in e?e.day:e.date,10);break;case"number":o=e*B.Search.ONE_DAY,t=(s=new Date(o)).getFullYear(),a=s.getMonth(),r=s.getDate();break;case"undefined":"invalid"}return i=(n="number"==typeof t&&!isNaN(t)&&"number"==typeof a&&!isNaN(a))&&"number"==typeof r&&!isNaN(r)&&0!==r,_r_(i?new B.Search.Date({year:t,month:a,date:r}):n?new B.Search.MonthDate({year:t,month:a}):new B.Search.InvalidDate)},B.Search.AbstractDate=function(){},B.Search.AbstractDate.prototype.initValue_=function(){_i_("9fc:154d5f90"),this.dateObject_=new Date(Date.UTC(this.year,this.month,this.date||1)),this.value_=Math.floor(this.dateObject_.valueOf()/B.Search.ONE_DAY),_r_()},B.Search.AbstractDate.toString=function(){throw _i_("9fc:d5d16a3f"),"Abstract method should be override in child classes"},B.Search.AbstractDate.prototype.valueOf=function(){return _i_("9fc:f43ea204"),this.value_||this.initValue_(),_r_(this.value_)},B.Search.Date=function(e){_i_("9fc:e68cde5f"),this.year=e.year,this.month=e.month,this.date=e.date,this.type="valid",_r_()},B.Search.Date.prototype=new B.Search.AbstractDate,B.Search.Date.prototype.toString=function(){_i_("9fc:dd8fb3b1");var e=[],t=this.month+1;return e.push(this.year),t<=9?e.push("0"+t):e.push(t),this.date<=9?e.push("0"+this.date):e.push(this.date),_r_(e.join("-"))},B.Search.Date.prototype.addDays=function(e){return _i_("9fc:410a2ff5"),_r_(B.Search.createDate(this+e))},B.Search.MonthDate=function(e){_i_("9fc:149b43e3"),this.year=e.year,this.month=e.month,this.type="month",_r_()},B.Search.MonthDate.prototype=new B.Search.AbstractDate,B.Search.MonthDate.prototype.toString=function(){_i_("9fc:dd5d341a");var e=[],t=this.month+1;return e.push(this.year),t<=9?e.push("0"+t):e.push(t),_r_(e.join("-"))},B.Search.InvalidDate=function(){_i_("9fc:8f41a0ab"),this.type="invalid",_r_()},B.Search.InvalidDate.prototype=new B.Search.AbstractDate,B.Search.InvalidDate.prototype.toString=function(){return _i_("9fc:1abe99a8"),_r_("")},B.Search.AbstractWidget=function(){},B.Search.AbstractWidget.prototype.initialize=function(e,t){_i_("9fc:5b81e92c"),this.$element=e,this.setOptions(t),_r_()},B.Search.AbstractWidget.prototype.setOptions=function(e){_i_("9fc:18c615de"),this.options||(this.options={}),this.options=$.extend(this.options,e),_r_()},B.Search.AbstractWidget.prototype.initEvents=function(){throw _i_("9fc:b79a4299"),"Abstract intiEvents method should be implemented in widget instances"},B.Search.AbstractWidget.prototype.onExternalEventConfigChanged=function(){throw _i_("9fc:e63441e0"),"Abstract onExternalEventConfigChanged method should be implemented in widget instances"},B.Search.AbstractWidget.prototype.getConfig=function(){throw _i_("9fc:a1397566"),"Abstract getConfig method should be implemented in widget instances"},B.Search.AbstractWidget.prototype.trigger=function(e){_i_("9fc:59868652"),"groupChanged"===e&&"function"==typeof this.onExternalEventConfigChanged&&this.onExternalEventConfigChanged.apply(this,[].slice.call(arguments,1)),_r_()},B.Search.AbstractWidget.prototype.onInit=function(){_i_("9fc:340b4e5d");var e=this;"function"==typeof this.options.onInit&&window.setTimeout(function(){_i_("9fc:631131f1"),e.options.onInit.call(e,e.getConfig()),_r_()},10),_r_()},B.Search.AbstractWidget.prototype.onChange=function(){_i_("9fc:31645f09"),"function"==typeof this.options.onChange&&this.options.onChange.call(this,this.getConfig()),_r_()},B.Search.AbstractWidget.prototype.tryCallback=function(e,t,a){var r;if(_i_("9fc:1ba2bb41"),!e)return _r_();t=t||[],"function"==typeof this.options[e]?r=this.options[e]:"function"==typeof a&&(r=a),r&&r.apply(this,t),_r_()},B.Search.AbstractWidget.prototype.DISABLED_CLASS="disabled",B.Search.AbstractWidget.prototype.hide=function(){_i_("9fc:550999a5"),this.$element.toggleClass(this.DISABLED_CLASS,!0),_r_()},B.Search.AbstractWidget.prototype.show=function(){_i_("9fc:38284345"),this.$element.toggleClass(this.DISABLED_CLASS,!1),_r_()},B.Search.createWidgetPlugin=function(e,t){if(_i_("9fc:e4ef6b65"),$.fn[e])throw"Jquery plugin "+e+" is already defined";return $.fn[e]=function(i,n){_i_("9fc:5a788345");var o=[];return _r_(function(r){if(_i_("9fc:755a3c6e"),"notify"===r)for(var e=arguments[1],t=arguments[2],a=0;a<o.length;a++)o[a].trigger(e,t);return _r_(this.each(function(){_i_("9fc:e378cb13");var e=i,t=$(this),a=t.data()[e];a?a.setOptions(r):(a=new n(t,r),t.data(e,a),o.push(a)),_r_()}))})}(e,t),_r_($.fn[e])},B.Search.validators={storage_:[]},B.Search.Validator=function(){},B.Search.Validator.prototype.name="general",B.Search.Validator.prototype.type="general",B.Search.Validator.prototype.success=void 0,B.Search.Validator.prototype.fail=void 0,B.Search.Validator.prototype.test=function(){},B.Search.Validator.prototype.validate=function(){_i_("9fc:bc2dacc9");var e=this.test()?"fail":"success",t={name:this.name,status:e},a=e+"Callback";return"function"==typeof this[e]?t.message=this[e]():void 0!==this[e]&&(t.message=this[e]),"function"==typeof this[a]&&(t.callback=this[a]),this.validationParameters&&(t.validationParameters=this.validationParameters),_r_(new B.Search.ValidationResult(t))},B.Search.ValidationResult=function(e){_i_("9fc:014464f8"),this.setOptions_(e),_r_()},B.Search.ValidationResult.prototype.status=void 0,B.Search.ValidationResult.prototype.message=void 0,B.Search.ValidationResult.prototype.callback=function(){},B.Search.ValidationResult.prototype.valueOf=function(){return _i_("9fc:5dfea240"),_r_("fail"!==this.status)},B.Search.ValidationResult.prototype.toString=function(){return _i_("9fc:e73272d1"),_r_(this.message||"")},B.Search.ValidationResult.prototype.setOptions_=function(e){if(_i_("9fc:960e0e12"),!e)return _r_(this);return e.name&&(this.name=e.name),e.status&&(this.status=e.status),e.message&&(this.message=e.message),"function"==typeof e.callback&&(this.callback=e.callback),e.validationParameters&&(this.validationParameters=e.validationParameters),_r_(this)},B.Search.validators.create=function(e){_i_("9fc:f0c8e995");var t=new B.Search.Validator;if(!e)return _r_(t);return e.name&&(t.name=e.name),e.type&&(t.type=e.type),e.success&&(t.success=e.success),e.fail&&(t.fail=e.fail),e.failCallback&&(t.failCallback=e.failCallback),e.successCallback&&(t.successCallback=e.successCallback),e.test&&(t.test=e.test),B.Search.validators.storage_.push(t),_r_(t)},B.Search.validators.all=function(){return _i_("9fc:0510e413"),_r_(this.storage_)},B.Search.validators.allOfType=function(e){_i_("9fc:c004946f");for(var t=[],a=0;a<this.storage_.length;a++)this.storage_[a].type===e&&t.push(this.storage_[a]);return _r_(t)},B.Search.DEFAULT_GROUP_COFIGURATION={adults:2,rooms:1,children:0},B.Search.Interface=function(){_i_("9fc:57e8ab3f");var t=this;this.datesStorage={checkin:B.Search.createDate(),checkout:B.Search.createDate(),mode:"regular"},this.groupStorage={value:B.Search.createGroup()},this.flexibleDatesStorage={interval:null,monthYear:B.Search.createDate()},this.destinationStorage={value:null},this.advancedSearchStorage={state:"disabled"},this.dates=function(){var e;switch(_i_("9fc:058ab1c8"),arguments.length){case 0:return _r_({checkin:this.getDate_("checkin"),checkout:this.getDate_("checkout"),mode:this.getDatesMode_(),validate:function(){return _i_("9fc:662e85ff"),_r_(t.validateDates_.apply(t,[].slice.call(arguments,0)))},setMode:function(){return _i_("9fc:65a42c1c"),_r_(t.setDatesMode_.apply(t,[].slice.call(arguments,0)))},validationResults:function(){return _i_("9fc:4dc57560"),_r_(t.validationResults)}});case 1:return _r_(this.getDate_(arguments[0]));case 2:return"mode"===arguments[0]?_r_(t.setDatesMode_.apply(t,[].slice.call(arguments,1))):(e=B.Search.createDate(arguments[1]),_r_(this.setDate_(arguments[0],e)));default:return e=B.Search.createDate(arguments[1]),_r_(this.setDate_(arguments[0],e))}_r_()},this.flexibleDates=function(){return _i_("9fc:83ed0a39"),_r_({interval:function(){return _i_("9fc:7acf8ead"),1===arguments.length?_r_(t.setInterval_.apply(t,[].slice.call(arguments,0))):_r_(t.getInterval_())},monthYear:function(){return _i_("9fc:13da1d52"),1===arguments.length?_r_(t.setMonthYear_.apply(t,[].slice.call(arguments,0))):_r_(t.getMonthYear_())},validate:function(){return _i_("9fc:8ec33866"),_r_(t.validateFlexibleDates_.apply(t,[].slice.call(arguments,0)))}})},this.destination=function(){switch(_i_("9fc:269b6eff"),arguments.length){case 0:return _r_(this.getDestination_());default:return _r_(this.setDestination_(arguments[0]))}_r_()},this.group=function(){switch(_i_("9fc:6c4b43a2"),arguments.length){case 0:return _r_({value:this.getGroup_(),mode:function(e){return _i_("9fc:d7c3e4cf"),_r_(e?t.setGroupMode_.apply(t,[].slice.call(arguments,0)):t.getGroupMode_.apply(t,[].slice.call(arguments,0)))},validate:function(){return _i_("9fc:8a37e316"),_r_(t.validateGroup_.apply(t,[].slice.call(arguments,0)))},setMode:function(){return _i_("9fc:9a62233c"),_r_(t.setGroupMode_.apply(t,[].slice.call(arguments,0)))}});case 1:return"reset"===arguments[0]?_r_(this.setGroup_("config",B.Search.DEFAULT_GROUP_COFIGURATION)):"value"===arguments[0]?_r_(this.getGroup_()):"string"==typeof arguments[0]?_r_(this.getGroup_(arguments[0])):_r_(this.setGroup_("config",arguments[0]));default:if("reset"===arguments[0])return _r_(this.setGroup_("config",arguments[1]));return _r_(this.setGroup_(arguments[0],arguments[1]))}_r_()},this.advanced=function(){return _i_("9fc:1d531765"),_r_({mode:function(e){return _i_("9fc:e997a23b"),_r_(e?t.setAdvancedSearchMode_.apply(t,[].slice.call(arguments,0)):t.getAdvancedSearchMode_.apply(t,[].slice.call(arguments,0)))},enable:function(){return _i_("9fc:766b7e80"),_r_(t.setAdvancedSearchMode_.apply(t,["enabled"]))},disable:function(){return _i_("9fc:b0c4b370"),_r_(t.setAdvancedSearchMode_.apply(t,["disabled"]))}})},_r_()},B.Search.Interface.prototype={constructor:B.Search.Interface,sanitizeDateType_:function(e){return _i_("9fc:da4947e3"),_r_("checkin"===e||"checkout"===e?e:null)},getDate_:function(e){_i_("9fc:709643c9");var t=this.sanitizeDateType_(e);return _r_(this.datesStorage[t])},setDate_:function(e,t,a){_i_("9fc:821f295f");var r=B.Search.createDate(t),i="valid"===r.type?B.Search.Events.DATE_CHANGED:B.Search.Events.DATE_MONTH_CHANGED,n=this.sanitizeDateType_(e),o=this.datesStorage[n];return a=a||{},n?r.type===o.type&&r.valueOf()===o.valueOf()||(this.datesStorage[n]=r,B.eventEmitter.trigger(i,{type:n,value:r,search:this,referrer:a.referrer})):window.onerror("attempt_to_set_date_with_wrong_type:_"+e,window.location),_r_(r)},validateDates_:function(e,t){if(_i_("9fc:1ab66382"),"reset"===e)return B.eventEmitter.trigger(B.Search.Events.DATE_VALID),_r_(!0);var a=B.Search.validators.allOfType("dates").map(function(e){return _i_("9fc:e3e1d02a"),_r_(e.validate())}),r=a.every(function(e){return _i_("9fc:b8b3d8c2"),_r_("success"===e.status)});return this.validationResults=r?null:a,t&&t.silent||B.eventEmitter.trigger(r?B.Search.Events.DATE_VALID:B.Search.Events.DATE_INVALID,{validators:a}),_r_(r)},sanitizeDatesMode_:function(e){return _i_("9fc:21fee40d"),_r_("regular"===e||"no-dates"===e||"flexible"===e?e:null)},getDatesMode_:function(){return _i_("9fc:38165332"),_r_(this.datesStorage.mode)},setDatesMode_:function(e){_i_("9fc:3f68116b");var t=this.sanitizeDatesMode_(e);return t&&this.datesStorage.mode!==t&&(this.datesStorage.mode=t,B.eventEmitter.trigger(B.Search.Events.DATE_MODE_CHANGED,{mode:t})),_r_(this)},getMonthYear_:function(){return _i_("9fc:1d447962"),_r_(this.flexibleDatesStorage.monthYear)},setMonthYear_:function(e){_i_("9fc:4a531ea2");var t=B.Search.createDate(e),a=this.flexibleDatesStorage.monthYear;return t.valueOf()!==a.valueOf()&&(this.flexibleDatesStorage.monthYear=t,B.eventEmitter.trigger(B.Search.Events.FLEXIBLE_MONTHYEAR_CHANGED,{value:t})),_r_(t)},getInterval_:function(){return _i_("9fc:5ec4fd64"),_r_(this.flexibleDatesStorage.interval)},setInterval_:function(e){return _i_("9fc:fc6372bf"),"weekend"!==e&&"week"!==e&&(e="any"),this.flexibleDatesStorage.interval!==e&&(this.flexibleDatesStorage.interval=e,B.eventEmitter.trigger(B.Search.Events.FLEXIBLE_INTERVAL_CHANGED,{value:e})),_r_(this)},validateFlexibleDates_:function(){_i_("9fc:c9bef4ee");var e=B.Search.validators.allOfType("flexible").map(function(e){return _i_("9fc:e3e1d02a1"),_r_(e.validate())}),t=e.every(function(e){return _i_("9fc:b8b3d8c21"),_r_("success"===e.status)});return B.eventEmitter.trigger(t?B.Search.Events.FLEXIBLE_VALID:B.Search.Events.FLEXIBLE_INVALID,{validators:e}),_r_(t)},getDestination_:function(){return _i_("9fc:01f7500a"),_r_(this.destinationStorage.value)},setDestination_:function(e){_i_("9fc:3b2c8cec");var t=e&&e.data,a=this.destinationStorage&&this.destinationStorage.value&&this.destinationStorage.value;t&&(!a||a&&a.dest_id!==t.dest_id)&&(this.destinationStorage.value=t,B.eventEmitter.trigger(B.Search.Events.DESTINATION_CHANGED,this.destinationStorage.value)),_r_()},getGroup_:function(e){return _i_("9fc:d5e23da0"),_r_(e?this.groupStorage.value[e]:this.groupStorage.value)},setGroup_:function(e,t){var a;if(_i_("9fc:87a7d0ba"),"rooms"===e||"adults"===e||"children"===e||"childrenAges"===e||"type"===e||"name"===e)this.setGroupValue_(e,t);else if("config"===e){for(var r=0,i=(a=t instanceof B.Search.Group?t:B.Search.createGroup(t)).childrenAges.length;r<i;r++)void 0===a.childrenAges[r]&&(a.childrenAges[r]=this.groupStorage.value.childrenAges[r]);a.valueOf()!==this.groupStorage.value.valueOf()&&(this.groupStorage.value=a,this.triggerGroupEvent())}_r_()},setGroupValue_:function(e,t){_i_("9fc:20d5ab9f");var a,r={};r[e]=t,(a=B.Search.createGroup(this.groupStorage.value)).update(r),a.valueOf()!==this.groupStorage.value.valueOf()&&(this.groupStorage.value=a,this.triggerGroupEvent()),_r_()},getGroupMode_:function(){return _i_("9fc:9b02c477"),_r_(this.groupStorage.mode)},setGroupMode_:function(e){return _i_("9fc:acdc3dc3"),"basic"!==e&&"custom"!==e&&(e="custom"),e&&this.groupStorage.mode!==e&&(this.groupStorage.mode=e,B.eventEmitter.trigger(B.Search.Events.GROUP_MODE_CHANGED,{mode:e})),_r_(this)},triggerGroupEvent:function(){_i_("9fc:043f0a27"),B.eventEmitter.trigger(B.Search.Events.GROUP_CHANGED,this.groupStorage.value),_r_()},validateGroup_:function(e){if(_i_("9fc:c32022cd"),"reset"===e)return B.eventEmitter.trigger(B.Search.Events.GROUP_VALID),_r_(!0);var t=B.Search.validators.allOfType("group").map(function(e){return _i_("9fc:e3e1d02a2"),_r_(e.validate())}),a=t.every(function(e){return _i_("9fc:b8b3d8c22"),_r_("success"===e.status)});return B.eventEmitter.trigger(a?B.Search.Events.GROUP_VALID:B.Search.Events.GROUP_INVALID,{validators:t}),_r_(a)},setAdvancedSearchMode_:function(e){_i_("9fc:012941e5"),e===this.advancedSearchStorage.state||"enabled"!==e&&"disabled"!==e||(this.advancedSearchStorage.state=e,B.eventEmitter.trigger("enabled"===e?B.Search.Events.ADVANCED_SEARCH_ENABLED:B.Search.Events.ADVANCED_SEARCH_DISABLED)),_r_()},getAdvancedSearchMode_:function(){return _i_("9fc:06d51ddb"),_r_(this.advancedSearchStorage.state)}},B.search=new B.Search.Interface,B.when({events:"ready"}).run(function(e){_i_("9fc:c4ea6a80"),{init:function(){_i_("9fc:d36ab179"),this.initDestination(),this.initDates(),this.initGroup(),_r_()},initDates:function(){var e,t;function a(e,t){_i_("9fc:91fe85f3");var a=t.split("-"),r=new Date(a[0],a[1]-1,e,0,0,0,0);if(isNaN(r.getTime()))return _r_(!1);return _r_(new B.Search.Date({year:a[0],month:a[1]-1,date:e}))}function r(e){_i_("9fc:85dea210");var t=e.split("-"),a=new Date(t[0],t[1]-1,t[2],0,0,0,0);if(isNaN(a.getTime()))return _r_(!1);return _r_(new B.Search.Date({year:t[0],month:t[1]-1,date:t[2]}))}_i_("9fc:cc5c2fbd"),B.env.s_value_checkin_monthday&&B.env.s_value_checkin_year_month?(e=a(B.env.s_value_checkin_monthday,B.env.s_value_checkin_year_month))&&B.search.dates("checkin",e):B.env.b_checkin_date?(e=r(B.env.b_checkin_date))&&B.search.dates("checkin",e):B.env.b_session_checkin_date&&(e=r(B.env.b_session_checkin_date))&&B.search.dates("checkin",e),B.env.s_value_checkout_monthday&&B.env.s_value_checkout_year_month?(t=a(B.env.s_value_checkout_monthday,B.env.s_value_checkout_year_month))&&B.search.dates("checkout",t):B.env.b_checkout_date?(t=r(B.env.b_checkout_date))&&B.search.dates("checkout",t):B.env.b_session_checkout_date&&(t=r(B.env.b_session_checkout_date))&&B.search.dates("checkout",t),B.env.b_no_dates_mode&&B.search.dates("mode",B.Search.DateModes.NODATES),_r_()},initGroup:function(){_i_("9fc:6e674426");try{var e=B.env.b_group&&B.env.b_group[0],t=B.env.b_group_rooms_wanted,a=[];if(e&&t){if(e.ages)for(var r=0;r<e.ages.length;r++)void 0!==e.ages[r].age&&a.push(e.ages[r].age);B.search.group({adults:e.guests,childrenAges:a,rooms:t})}else B.search.group("value")instanceof B.Search.InvalidGroup&&B.search.group({adults:2,rooms:1,type:B.Search.GroupModes.REGULAR})}catch(e){throw"Unable to set group"}_r_()},initDestination:function(){_i_("9fc:61f9294b");var e={name:void 0,data:{}};B&&B.env&&(B.env.sess_dest_id&&(e.data.dest_id=B.env.sess_dest_id),B.env.sess_dest_type&&(e.data.dest_type=B.env.sess_dest_type),B.env.sess_dest_fullname&&(e.data.name=B.env.sess_dest_fullname,e.term=B.env.sess_dest_fullname)),e.data.dest_id&&e.data.dest_type&&e.data.name&&B.search.destination(e),_r_()}}.init(),_r_()}),function(u,n){function r(e,r){_i_("9fc:0f2eea18");var _=this;this.$element=e,this.$inputs=e.find("select, input"),this.options=r||{},this.$element.data("always-enabled")&&(this.options.alwaysEnabled=!0);var l=e.find(".b-date-selector__control-dayselector select, .js--sb-dates__select-day"),a=e.find(".b-date-selector__control-monthselector select, .js--sb-dates__select-month-year");function t(e){if(_i_("9fc:11d00ced"),"string"!=typeof e)return _r_(!1);var t=e.split("-");if(2!==t.length)return _r_(!1);return _r_({year:parseInt(t[0],10),month:parseInt(t[1],10)-1})}function h(e){_i_("9fc:9e473485");var t=document.createElement("option");return t.innerHTML=e.text,t.selected=e.selected,t.value=e.value,_r_(t)}function d(e,t){_i_("9fc:1475e653");var a=u.env.b_lang;return isNaN(t)?_r_("ja"==a||"zh"==a||"ko"==a?e+u.env.sbox_day:e):_r_("ja"==a||"zh"==a||"ko"==a||"hu"==a?"ja"==a||"zh"==a||"ko"==a?e+u.env.sbox_day+" "+r.dayNames[t]:e+" "+r.dayNames[t]:r.dayNames[t]+" "+e)}function i(e,t){_i_("9fc:43058fa2");var a,r,i,n,o=l.get(0),s=l.val();if(e.year&&e.month%1==0)a=new Date(e.year,e.month,1).getDay(),n=function(e,t){var a;switch(_i_("9fc:d5bccadd"),e.month){case 1:a=e.year%4==0&&e.year%100!=0||e.year%400==0?29:28;break;case 0:case 2:case 4:case 6:case 7:case 9:case 11:a=31;break;case 3:case 5:case 8:case 10:a=30}return"checkin"===t&&e.month===_.lastMonth.month&&e.year===_.lastMonth.year&&(a-=1),_r_(a)}(e,t),s=e.date;else{if(e)return _r_();n=31}for(;o.firstChild;)o.removeChild(o.firstChild);r=document.createDocumentFragment(),(i=document.createElement("option")).innerHTML=u.env.sbox_day,i.value=0,r.appendChild(i);for(var c=1;c<=n;c++)r.appendChild(h({text:d(c,(a-1+c)%7),selected:s==c,value:c}));o.appendChild(r),_r_()}function n(){_i_("9fc:f233b3c3");var e=s();if(!e)return _r_();"checkin"===r.type?u.search.dates("checkin",e):"checkout"===r.type&&u.search.dates("checkout",e),_r_()}function o(e){_i_("9fc:d4e5c7dd"),i(e),function(e){_i_("9fc:0ab116b4");var t=e.year+"-"+(e.month+1);a.val(t),_r_()}(e),_r_()}function s(){_i_("9fc:34da5635");var e=t(a.val());if(e.date=l.val(),!e||isNaN(e.date))return _r_(!1);return _r_(e)}this.lastMonth=t(a.find("option:last").val()),a.bind("change.dateSelector",function(e){_i_("9fc:3614fb72"),i(s(),r.type),n(),e&&e.originalEvent&&("checkin"===r.type?u.Search.tracker.trackEvent(u.Search.TrackingEvents.CHECKIN_MONTH_SELECTOR):"checkout"===r.type&&u.Search.tracker.trackEvent(u.Search.TrackingEvents.CHECKOUT_MONTH_SELECTOR)),_r_()}),l.bind("change.dateSelector",function(e){_i_("9fc:56bd5658"),n(),e&&e.originalEvent&&("checkin"===r.type?u.Search.tracker.trackEvent(u.Search.TrackingEvents.CHECKIN_DAY_SELECTOR):"checkout"===r.type&&u.Search.tracker.trackEvent(u.Search.TrackingEvents.CHECKOUT_DAY_SELECTOR)),_r_()}),a.trigger("change.dateSelector"),e.bind("dateSelected",function(e,t){if(_i_("9fc:45338faf"),!t)return _r_();t.type===r.type&&o(t.value),_r_()}),_r_()}function e(){_i_("9fc:1a1433c7"),this.instances_=[],_r_()}_i_("9fc:e2fcf955"),r.prototype.setOptions=function(e){if(_i_("9fc:8a0ecc8b"),!e)return _r_(this);return e.disabled?this.$inputs.attr("disabled",!0):this.$inputs.removeAttr("disabled"),_r_(this)},r.prototype.getOption=function(e){if(_i_("9fc:373a73b0"),!e)return _r_(this.options);return this.options[e]?_r_(this.options[e]):_r_(null)},r.prototype.trigger=function(e){if(_i_("9fc:a8ecb120"),!e)return _r_(this);return"disable"!==e||this.options.alwaysEnabled?"enable"===e&&this.setOptions({disabled:!1}):this.setOptions({disabled:!0}),_r_(this)},e.prototype.create=function(e,t){_i_("9fc:c4d42011");var a=new r(e,t);return this.add(a),_r_(a)},e.prototype.add=function(e){return _i_("9fc:84234e5a"),this.instances_.push(e),_r_(e)},e.prototype.all=function(){return _i_("9fc:cef83ce5"),_r_(this.instances_)},e.prototype.notifyAll=function(){_i_("9fc:5dde4b6e");for(var e=this.all(),t=0;t<e.length;t++)e[t].trigger.apply(e[t],[].slice.call(arguments,0));return _r_(this.instances_)};var o=u.Search.datePickerController=new e;n.fn.dateSelector=function(r){_i_("9fc:363f441a");var i=u.env.b_simple_weekdays_for_js.slice(0);return i.unshift(i.pop()),_r_(this.each(function(){_i_("9fc:2f490550");var e=n(this),t=e.data(),a=t.calendar2;a?a.setOptions(r):o.create(e,n.extend({dayNames:i},r,t)),_r_()}))},_r_()}(B,$),_i_("9fc:e88bf117"),B.Search=B.Search||{},B.Search.getShiftedDate=function(e,t){if(_i_("9fc:cdf45ac5"),!e)return _r_();var a=new Date(e.year,e.month,e.date+t);return _r_({year:a.getFullYear(),month:a.getMonth(),date:a.getDate()})},B.Search.openDatepicker=function(e){_i_("9fc:32d11e63");var t,a,r,i=B.require("window-scroller"),n=$.extend({},{selector:null,duration:null},e);a=n.selector,r=n.duration,$.fn.calendar2("each",function(e){if(_i_("9fc:55174b69"),!a)return t=e,_r_(!1);if(e.$input.is(a))return t=e,_r_(!1);_r_()}),t&&i.scrollToBlock(t.$input,void 0,r).then(function(){_i_("9fc:12c4274a"),t.show(),_r_()}),_r_()},B.when({events:"ready"}).run(function(e){_i_("9fc:8c3c4d70"),$(window).delegate(".js-open-datepicker","click",function(e){_i_("9fc:26aa8cae"),e.preventDefault();var t=$(this).data(),a={};void 0!==t.selector&&(a.selector=t.selector),void 0!==t.duration&&(a.duration=t.duration),B.Search.openDatepicker(a),_r_()}),_r_()}),_r_(),B.define("main/old_calendar1",function(e,t,a){_i_("9fc:21d1dfe7");var u=e("jquery"),f=booking.env,r=1e3*f.b_timestamp,i=864e5<=Math.abs(+new Date-new Date(r));a.exports={version:1.4,datefmt:"YYYY MM DD",minimalDays:1,maximalDays:30,oldDays:1,from:{date:null,day:null,month:null,year:null},till:{date:null,day:null,month:null,year:null},viewDateFrom:i?new Date(r):new Date,viewDateTill:i?new Date(r):new Date,oneDayInMS:864e5,calendars:[],calendarTypes:{checkin_day:{isTill:!1,isDay:!0},checkin_monthday:{isTill:!1,isDay:!0},checkin_year_month:{isTill:!1,isDay:!1},pre_checkin_year_month:{isTill:!1,isDay:!1},checkout_day:{isTill:!0,isDay:!0},checkout_monthday:{isTill:!0,isDay:!0},checkout_year_month:{isTill:!0,isDay:!1},pre_checkout_year_month:{isTill:!0,isDay:!1},start_monthday:{isTill:!1,isDay:!0},start_year_month:{isTill:!1,isDay:!1},end_monthday:{isTill:!0,isDay:!0},end_year_month:{isTill:!0,isDay:!1}},maxMonthsInFuture:12,maxDaysInFuture:365,maxDaysInThePast:1,syncDate:null,userServDate:!1,hasDataRange:!1,maxYearsInFuture:function(){_i_("9fc:558a42d8"),this.today=i?this.noHourDate(new Date(r)):this.noHourDate(null),this.maxMonthsInFuture=12,this.maxDaysInFuture=parseInt(f.calendar_days_allowed_number),this.tomorrow=this.dateAfterDays(this.today,1),this.endOfYear1=this.dateAfterDays(this.today,this.maxDaysInFuture),this.endOfYear2=this.dateAfterDays(this.today,this.maxDaysInFuture-1),_r_()},syncDates:function(e,t,a,r,i){_i_("9fc:e9681cdd"),u(".b_check_blocked").removeClass("b_check_blocked"),i||(u("#availcheck").attr("checked",!1),u("#define_group input, #define_group select").removeAttr("disabled"),u("#define_group").removeClass("disableme")),e?(this.till.day=null==t?this.till.day:t,this.till.month=null==a?this.till.month:a,this.till.year=null==r?this.till.year:r,null!=this.till.day&&null!=this.till.month&&null!=this.till.year&&(this.till.date=new Date(this.till.year+"/"+this.till.month+"/"+this.till.day+" 00:00:00"),this.viewDateTill=new Date(this.till.year+"/"+this.till.month+"/"+this.till.day+" 00:00:00"))):(this.hasDataRange=!0,this.from.day=null==t?this.from.day:t,this.from.month=null==a?this.from.month:a,this.from.year=null==r?this.from.year:r,null!=this.from.day&&null!=this.from.month&&null!=this.from.year&&(this.from.date=new Date(this.from.year+"/"+this.from.month+"/"+this.from.day+" 00:00:00"),this.viewDateFrom=new Date(this.from.year+"/"+this.from.month+"/"+this.from.day+" 00:00:00")));var n=!1;e||null==this.from.date?e&&null!=this.till.date&&null==this.from.date&&(i||(this.from.date=this.dateAfterDays(this.till.date,~(this.minimalDays-1)),n=!0)):null!=this.till.date?this.till.date<=this.from.date&&(this.till.date=this.dateAfterDays(this.from.date,this.oldDays),n=!0):i||(this.till.date=this.dateAfterDays(this.from.date,this.minimalDays),n=!0),n&&(e?(this.from.year=this.from.date.getFullYear(),this.from.month=this.from.date.getMonth()+1,this.from.day=this.from.date.getDate(),this.viewDateFrom=new Date(this.from.year+"/"+this.from.month+"/"+this.from.day+" 00:00:00")):(this.till.year=this.till.date.getFullYear(),this.till.month=this.till.date.getMonth()+1,this.till.day=this.till.date.getDate(),this.viewDateTill=new Date(this.till.year+"/"+this.till.month+"/"+this.till.day+" 00:00:00")));for(var o=0;o<this.calendars.length;o++)u(this.calendars[o]).trigger("changed_date",[e,n]);booking.eventEmitter.trigger("CALENDAR:dates_changed",{type:e?"checkout":"checkin",otherChanged:n,oldApi:this}),_r_()},init:function(){if(_i_("9fc:4dc7918e"),"hotel"==booking.env.b_action)return _r_();if(this.calendarReady)return _r_();this.calendarReady=!0,this.maxYearsInFuture(),this.initAddHandlers(),_r_()},initAddHandlers:function(){_i_("9fc:ef8ffc8b");var i=this;u("select").each(function(){if(_i_("9fc:ba98c0ca"),"1"==this.getAttribute("data-no-old-calendar"))return _r_(!0);var e=u(this).attr("name");if(e&&i.calendarTypes[e]){i.calendars.push(this);var t=u(this).val();if("0"!=t){var a=i.calendarTypes[e];if(a.isDay)a.isTill?i.till.day=t:i.from.day=t;else{var r=t?t.split("-"):"";r.length&&0<r.length&&(a.isTill?(i.till.year=r[0],i.till.month=r[1]):(i.from.year=r[0],i.from.month=r[1]))}}u(this).bind("changed_date",function(e,t,a){_i_("9fc:b25b200c"),u("input",this.parentNode).each(function(){if(_i_("9fc:cf256ee4"),i.calendarTypes[u(this).attr("name")]){var e=i.calendarTypes[u(this).attr("name")];e.isDay&&e.isTill&&null!=i.till.day&&u(this).val(i.till.day),e.isDay&&!e.isTill&&null!=i.from.day&&u(this).val(i.from.day),!e.isDay&&e.isTill&&null!=i.till.month&&null!=i.till.year&&u(this).val(i.till.year+"-"+i.till.month),e.isDay||e.isTill||null==i.from.month||null==i.from.year||u(this).val(i.from.year+"-"+i.from.month)}_r_()});var r=i.calendarTypes[u(this).attr("name")];((t||a)&&r.isTill||(!t||a)&&!r.isTill)&&(r.isDay?(r.isTill&&null!=i.till.year&&null!=i.till.month||!r.isTill&&null!=i.from.year&&null!=i.from.month)&&i.rebuildDaySelect(this,r.isTill):r.isTill&&null!=i.till.year&&null!=i.till.month?i.selectOption(this,i.till.year+"-"+i.till.month):r.isTill||null==i.from.year||null==i.from.month||i.selectOption(this,i.from.year+"-"+i.from.month)),_r_()}),u(this).change(function(){_i_("9fc:8484dcfb");var e=i.calendarTypes[u(this).attr("name")],t=u(this).val(),a="string"==typeof t?t.split("-"):[];if("0"!=t)if(u(this).parents(".newcalendar").length){var r=u(this).parents(".newcalendar");a.length&&1<a.length&&(u(this).parents(".calendarTill").length?(i.viewDateTill=new Date(a[0]+"/"+a[1]+"/"+i.viewDateTill.getDate()+" 00:00:00"),i.rebuildCalendarTable(u("table",r).get(0),!0,i.viewDateTill.getMonth()+1,i.viewDateTill.getFullYear())):(i.viewDateFrom=new Date(a[0]+"/"+a[1]+"/"+i.viewDateFrom.getDate()+" 00:00:00"),i.rebuildCalendarTable(u("table",r).get(0),!1,i.viewDateFrom.getMonth()+1,i.viewDateFrom.getFullYear())))}else i.syncDates(e.isTill,e.isDay?t:null,e.isDay?null:a.length&&1<a.length?a[1]:null,e.isDay?null:a[0]);_r_()})}_r_()}),u(".newcalendar").each(function(){_i_("9fc:d5677833"),u(this).hasClass("calendarTill")?i.rebuildCalendarTable(u("table",this).get(0),!0,i.viewDateTill.getMonth()+1,i.viewDateTill.getFullYear()):i.rebuildCalendarTable(u("table",this).get(0),!1,i.viewDateFrom.getMonth()+1,i.viewDateFrom.getFullYear()),i.calendars.push(this),u(this).bind("changed_date",function(e,t,a){if(_i_("9fc:e831cf39"),u(this).hasClass("calendarTill")){if(null!=i.till.month&&null!=i.till.year){var r=i.till.day?i.till.day:1;i.viewDateTill=new Date(i.till.year+"/"+i.till.month+"/"+r+" 00:00:00"),i.rebuildCalendarTable(u("table",this).get(0),!0,i.till.month,i.till.year)}}else if(null!=i.from.month&&null!=i.from.year){r=i.from.day?i.from.day:1;i.viewDateFrom=new Date(i.from.year+"/"+i.from.month+"/"+r+" 00:00:00"),i.rebuildCalendarTable(u("table",this).get(0),!1,i.from.month,i.from.year)}i.updateLabels(),_r_()}),u(".nextmonth",this).bind("click",function(){if(_i_("9fc:b98db49d"),!u(this).hasClass("disabled")){var e=u(this).parents(".newcalendar").get(0);u(this).parents(".calendarTill").length?(i.viewDateTill=i.dateAfterDays(i.viewDateTill,0,1),i.rebuildCalendarTable(u("table",e).get(0),!0,i.viewDateTill.getMonth()+1,i.viewDateTill.getFullYear())):(i.viewDateFrom=i.dateAfterDays(i.viewDateFrom,0,1),i.rebuildCalendarTable(u("table",e).get(0),!1,i.viewDateFrom.getMonth()+1,i.viewDateFrom.getFullYear()))}return this.blur(),_r_(!1)}),u(".prevmonth",this).bind("click",function(){if(_i_("9fc:5cf4d3a2"),!u(this).hasClass("disabled")){var e=u(this).parents(".newcalendar").get(0);u(this).parents(".calendarTill").length?(i.viewDateTill=i.dateAfterDays(i.viewDateTill,0,-1),i.rebuildCalendarTable(u("table",e).get(0),!0,i.viewDateTill.getMonth()+1,i.viewDateTill.getFullYear())):(i.viewDateFrom=i.dateAfterDays(i.viewDateFrom,0,-1),i.rebuildCalendarTable(u("table",e).get(0),!1,i.viewDateFrom.getMonth()+1,i.viewDateFrom.getFullYear()))}return this.blur(),_r_(!1)}),u("select",this).each(function(){_i_("9fc:b67210ff");var e=u(this).attr("name"),t=u(this).val();i.calendarTypes[e]?i.calendarTypes[e].isDay||(u(this).attr("name","pre_"+e),u(this.parentNode).append('<input type="hidden" name="'+e+'" value="'+t+'" />')):u(this).change(function(){_i_("9fc:cbd6ccdd");var e=u(this).val();if("0"!=e){var t=e.split("-");if(t.length&&0<t.length){var a=u(this).parents(".newcalendar");u(this).parents(".calendarTill").length?(i.viewDateTill=new Date(t[0]+"/"+t[1]+"/1 00:00:00"),i.rebuildCalendarTable(u("table",a).get(0),!0,t[1],t[0])):(i.viewDateFrom=new Date(t[0]+"/"+t[1]+"/1 00:00:00"),i.rebuildCalendarTable(u("table",a).get(0),!1,t[1],t[0]))}}_r_()}),_r_()}),_r_()}),null!=this.from.year&&null!=this.from.month&&null!=this.from.day&&i.syncDates(!1,this.from.day,this.from.month,this.from.year,!0),null!=this.till.year&&null!=this.till.month&&null!=this.till.day&&i.syncDates(!0,this.till.day,this.till.month,this.till.year,!0),_r_()},updateLabels:function(){_i_("9fc:a3fa5d6c");var e=Math.round((this.noHourDate(this.till.date)-this.noHourDate(this.from.date))/this.oneDayInMS);if(0<e&&f.night&&f.nights){var t=1==e?"1 "+f.night:f.nights.replace("{amount}",e);t.indexOf(e)<0&&(t=e+" "+t),u(".dayamount").length&&u(".dayamount").text(t),u(".no_nights_helper").length&&u(".no_nights_helper").text("("+t+")")}u(".calendarFrom").length&&(u(".calendarFrom .ct_month").text(f.b_short_months[parseInt(this.from.month)-1]),u(".calendarFrom .ct_day").text(this.from.day),u(".calendarTill").length&&(u(".calendarTill .ct_month").text(f.b_short_months[parseInt(this.till.month)-1]),u(".calendarTill .ct_day").text(this.till.day))),_r_()},updatePrevNextLinks:function(e,t){_i_("9fc:03c555c4");var a=this,r=this.dateAfterDays(this.tomorrow,this.maxDaysInFuture-2),i=1<this.maxDaysInThePast?this.dateAfterDays(this.tomorrow,~this.maxDaysInThePast):this.tomorrow,n=u(t).parents(".calendarTill").length?this.viewDateTill:this.viewDateFrom;u(".nextmonth",t.parentNode).each(function(){_i_("9fc:8c51ea38"),a.dateAfterDays(n,0,1,!0)>r?u(this).addClass("disabled"):u(this).removeClass("disabled"),_r_()}),u(".prevmonth",t.parentNode).each(function(){_i_("9fc:c91e77d9"),a.dateAfterDays(n,0,-1,!0)<i?u(this).addClass("disabled"):u(this).removeClass("disabled"),_r_()}),this.selectOption(u("select",t.parentNode),n.getFullYear()+"-"+(n.getMonth()+1)),_r_()},rebuildCalendarTable:function(e,t,a,r){_i_("9fc:5e165940");var i=document.createElement("table");u(i).html(e.innerHTML);var n=parseInt(new Date(r+"/"+a+"/1").getDay())-2;f.sunday_first?n+=1:n<0&&(n=7+n);for(var o=i.getElementsByTagName("td"),s=0;s<42;s++){var c=s-n,_=o[s];if(0<c&&c<=this.getDaysInMonth(a,r)){var l=new Date(r+"/"+a+"/"+c+" 00:00:00");if(this.isValidDate(l,t)){var h="";if(l-this.today==0&&(h+=" today"),l-this.till.date==0&&(h+=t?" selected":" endsel"),l-this.from.date==0&&(h+=t?" endsel":" selected"),l<this.till.date&&l>this.from.date&&(h+=" inbetween"),booking.env.b_fd_hotel_dates)for(var d=0;d<booking.env.b_fd_hotel_dates.length;d++){if(booking.env.b_fd_hotel_dates[d])u.lst=booking.env.b_fd_hotel_dates[d].split("-"),l-new Date(Number(u.lst[0]),Number(u.lst[1])-1,Number(u.lst[2]))==0&&(h+=" flashdeals")}_.innerHTML='<a href="#" class="'+h+'">'+c+"</a>"}else l-this.today==0?_.innerHTML='<span class="today">'+c+"</span>":_.innerHTML="<span>"+c+"</span>"}else _.innerHTML="&nbsp;"}u(e).html(i.innerHTML),this.updatePrevNextLinks(!0,e),_r_()},isValidDate:function(e,t){_i_("9fc:bbed0f88");var a=1<this.maxDaysInThePast?this.dateAfterDays(this.today,~this.maxDaysInThePast):this.today;return _r_(!(e<a||t&&e<this.tomorrow&&this.maxDaysInThePast<2||e>this.endOfYear1||!t&&e>this.endOfYear2))},rebuildDaySelect:function(e,t){_i_("9fc:75354f1a");var a="&nbsp;";if(t){var r=this.till.month,i=this.till.year;(null==(n=this.till.day)||booking.env.keep_day_month)&&(a='<option style="text-transform:capitalize;" value="0">'+f.sbox_day+"</option>")}else{var n;r=this.from.month,i=this.from.year;(null==(n=this.from.day)||booking.env.keep_day_month)&&(a='<option style="text-transform:capitalize;" value="0">'+f.sbox_day+"</option>")}u(e).html(a);var o=this.getDaysInMonth(r,i);function s(e,t,a){_i_("9fc:a16f30c6");a=new Date(Date.UTC(e,t-1,a)).getUTCDay();return _r_(a=0<a?a-1:6)}for(var c=1;c<=o;c++){var _=s(i,r,c),l=f.b_simple_weekdays_for_js[_]+" "+c;"ja"!=f.b_lang&&"zh"!=f.b_lang&&"ko"!=f.b_lang&&"hu"!=f.b_lang||(l="ja"==f.b_lang||"zh"==f.b_lang||"ko"==f.b_lang?c+B.env.sbox_day+" "+f.b_simple_weekdays_for_js[_]:c+" "+f.b_simple_weekdays_for_js[_]),u(e).append('<option value="'+c+'"'+(n==c?' selected="selected"':"")+">"+l+"</option>")}_r_()},noHourDate:function(e){_i_("9fc:3bb3c2f3");var t=null==e?this.userServDate?new Date(this.syncDate):new Date:e;return t.setHours(0),t.setMilliseconds(0),t.setMinutes(0),t.setSeconds(0),_r_(t)},getDaysInMonth:function(e,t){_i_("9fc:89e04d10");var a=[31,(_i_("9fc:eed2c000"),_r_(t%4==0&&t%100!=0||t%400==0?29:28)),31,30,31,30,31,31,30,31,30,31];return _r_(a[e-1])},selectOption:function(e,t,a){_i_("9fc:30c74ebe");for(var r,i,n,o=!1,s=u("option",e),c=0;c<s.length;c++)r=s[c],n=(i=u(r)).text(),t&&""!=t&&(i.val()==t?o=r.selected=!0:s[c].selected=!1),a&&""!=a&&(n==t?o=r.selected=!0:r.selected=!1);return _r_(o)},dateAfterDays:function(e,t,a,r){_i_("9fc:2c4123a1");var i=this.oneDayInMS*t;if(r&&e.setDate(1),a&&((12<a||a<-12)&&(e.setFullYear(e.getFullYear()+parseInt(a/12)),a%=12),0!=a)){var n=e.getMonth();12<n+a?(e.setFullYear(e.getFullYear()+1),e.setMonth(n+a-12)):n+a<0?(e.setFullYear(e.getFullYear()-1),e.setMonth(n+a+12)):e.setMonth(n+a)}var o=new Date(1*this.noHourDate(e)+i);if(e.getTimezoneOffset()!=o.getTimezoneOffset()){var s=e.getTimezoneOffset()-o.getTimezoneOffset();0<(s=60*(s<0?1+~s:s)*1e3)&&(o=new Date(1*this.noHourDate(e)+i+s))}return _r_(o)},scrollHandlers:[]},_r_()}),B.when({events:"ready"}).require(["main/old_calendar1"],function(e){_i_("9fc:5009d2b9"),e.init(),_r_()}),_i_("9fc:0c07f9a7"),window.addEventListener("load",function(){_i_("9fc:0eadea0a");var e=booking.require("ga-tracker");"undefined"!=typeof trigger_error_template_event_tracking&&!0===trigger_error_template_event_tracking&&(e.trackEvent(e.pageviewTracker,"Error Template (Aggregate)",b_errors),""!=b_this_referer&&e.trackEvent(e.pageviewTracker,"Error Template (Referrer)",b_this_referer+" - "+b_errors),e.trackEvent(e.pageviewTracker,"Error Template (RequestURL)",b_this_url+" - "+b_errors)),"send_change_dates"==booking.env.b_page&&($("#message_changing-dates").fadeIn(),$("#change_dates").submit(function(){_i_("9fc:94fb7142");var e=$("input[name=do]"),t=$("#change_dates input[name=checkin_date]").val(),r=$("#change_dates input[name=checkout_date]").val();t&&r&&(0<t.length||0<r.length)&&(cin_yymm=$("#checkin_year_month").val(),cin_dd=$("#checkin_day").val(),cin_yymmdd=cin_yymm+"-"+cin_dd,cout_yymm=$("#checkout_year_month").val(),cout_dd=$("#checkout_monthday").val(),cout_yymmdd=cout_yymm+"-"+cout_dd,a=t.replace(/-0/g,"-"),b=r.replace(/-0/g,"-"),a==cin_yymmdd&&b==cout_yymmdd||e.val("dochangedates")),_r_()})),"mybooking"==booking.env.b_action&&$("#message_changing-dates").fadeIn(),_r_()}),_r_(),function(){_i_("9fc:e07d9e35");var t=function(){_i_("9fc:0dd770a3");var _=B.require("jquery");return B.Search=B.Search||{},B.Search.SPECIAL_DIGITS={"０":0,"１":1,"２":2,"３":3,"４":4,"５":5,"６":6,"７":7,"８":8,"９":9,"٠":0,"١":1,"٢":2,"٣":3,"٤":4,"٥":5,"٦":6,"٧":7,"٨":8,"٩":9,"۰":0,"۱":1,"۲":2,"۳":3,"۴":4,"۵":5,"۶":6,"۷":7,"۸":8,"۹":9},B.Search.AbstractGroupConfigurationWidget=function(e,t){},B.Search.AbstractGroupConfigurationWidget.prototype.initialize=function(e,t){_i_("9fc:80251892"),this.$element=e,this.setOptions(t),_r_()},B.Search.AbstractGroupConfigurationWidget.prototype.setOptions=function(e){_i_("9fc:b3957ba7"),this.options||(this.options={}),this.options=_.extend(this.options,e),_r_()},B.Search.AbstractGroupConfigurationWidget.prototype.initEvents=function(){throw _i_("9fc:47507162"),"Abstract intiEvents method should be implemented in widget instances"},B.Search.AbstractGroupConfigurationWidget.prototype.onExternalEventConfigChanged=function(){throw _i_("9fc:ab8bced8"),"Abstract onExternalEventConfigChanged method should be implemented in widget instances"},B.Search.AbstractGroupConfigurationWidget.prototype.showErrorMessages=function(e){_i_("9fc:8ffc787a"),this.$errorContainer=this.$errorContainer||this.$element.find(".b-form-group__error-messages");for(var t=_("<ul></ul>",{class:"b-form-group__error-messages_list"}),a=_("<li></li>",{class:"b-form-group__error-messages_list-item"}),r=0;r<e.length;r++)t.append(a.clone().html(e[r]));this.$errorContainer.empty().append(t),_r_()},B.Search.AbstractGroupConfigurationWidget.prototype.hideErrorMessages=function(){_i_("9fc:37ffaf7c"),this.$errorContainer=this.$errorContainer||this.$element.find(".b-form-group__error-messages"),this.$errorContainer.empty(),_r_()},B.Search.AbstractGroupConfigurationWidget.prototype.getConfig=function(){throw _i_("9fc:a7b3d6c0"),"Abstract getConfig method should be implemented in widget instances"},B.Search.AbstractGroupConfigurationWidget.prototype.trigger=function(e,t){_i_("9fc:fee9703e"),"groupChanged"===e&&"function"==typeof this.onExternalEventConfigChanged&&this.onExternalEventConfigChanged.apply(this,[].slice.call(arguments,1)),"groupModeChanged"===e&&"function"==typeof this.onExternalEventModeChanged&&this.onExternalEventModeChanged.apply(this,[].slice.call(arguments,1)),"groupInvalid"===e&&"function"==typeof this.onExternalEventGroupInvalid&&this.onExternalEventGroupInvalid.apply(this,[].slice.call(arguments,1)),"groupValid"===e&&"function"==typeof this.onExternalEventGroupValid&&this.onExternalEventGroupValid.apply(this,[].slice.call(arguments,1)),_r_()},B.Search.AbstractGroupConfigurationWidget.prototype.onInit=function(){_i_("9fc:94baa125");var e=this;"function"==typeof this.options.onInit&&window.setTimeout(function(){_i_("9fc:708f5a88"),e.options.onInit.call(e,e.getConfig()),_r_()},10),_r_()},B.Search.AbstractGroupConfigurationWidget.prototype.onChange=function(){_i_("9fc:3a56a42c"),"function"==typeof this.options.onChange&&this.options.onChange.call(this,this.getConfig()),_r_()},B.Search.AbstractGroupConfigurationWidget.prototype.DISABLED_CLASS="disabled",B.Search.AbstractGroupConfigurationWidget.prototype.hide=function(){_i_("9fc:b6b9bcd1"),this.$element.toggleClass(this.DISABLED_CLASS,!0),_r_()},B.Search.AbstractGroupConfigurationWidget.prototype.show=function(){_i_("9fc:f20470d5"),this.$element.toggleClass(this.DISABLED_CLASS,!1),_r_()},B.Search.PredefinedGroupSelector=function(e,t){_i_("9fc:252aa872"),this.initialize.apply(this,[].slice.call(arguments,0)),this.initEvents(),this.onInit(),_r_()},B.Search.PredefinedGroupSelector.prototype=new B.Search.AbstractGroupConfigurationWidget,B.Search.PredefinedGroupSelector.prototype.initialize=function(e,t){_i_("9fc:50d1d2de");var i,n,o={};this.$element=e,this.$selector=e.find("select"),this.setOptions(t),this.$selector.find("option").each(function(e,t){_i_("9fc:b44a892f");var a=_(t),r=B.Search.createGroup(a.data());o[r]=t,"more_options"===r.type&&(i=t),a.is(":selected")&&(n=r),_r_()}),this.defaultConfigurationOption=i,this.groupConfigurationOptions=o,this.selectedConfiguration=n,_r_()},B.Search.PredefinedGroupSelector.prototype.initEvents=function(){_i_("9fc:3a267db7"),this.$selector.bind("change",_.proxy(this.onChange,this)),_r_()},B.Search.PredefinedGroupSelector.prototype.onChange=function(e){_i_("9fc:5c541625");var t=this.getConfig();this.selectedConfiguration.valueOf()!==t.valueOf()&&(this.selectConfiguration(t),"function"==typeof this.options.onChange&&this.options.onChange.call(this,t)),_r_()},B.Search.PredefinedGroupSelector.prototype.selectConfiguration=function(e){_i_("9fc:2ce32d17"),this.groupConfigurationOptions[e]?(this.groupConfigurationOptions[e].setAttribute("selected","selected"),this.selectedConfiguration=e):(this.selectedConfiguration=!1,this.defaultConfigurationOption.setAttribute("selected","selected")),_r_()},B.Search.PredefinedGroupSelector.prototype.onExternalEventConfigChanged=function(e){if(_i_("9fc:b02ca55a"),this.selectedConfiguration.valueOf()===e.valueOf())return _r_();this.selectConfiguration(e),_r_()},B.Search.PredefinedGroupSelector.prototype.getConfig=function(){_i_("9fc:8c7cb906");var e=this.$selector.get(0),t=_(e.options[e.selectedIndex]),a=this.parseOption(t);return _r_(a)},B.Search.PredefinedGroupSelector.prototype.parseOption=function(e){_i_("9fc:e1f23c98");var t=e.data(),a=B.Search.createGroup(t);return _r_(a)},B.Search.CustomGroupSelector=function(e,t){_i_("9fc:02d8b062"),this.$element=e,this.setOptions(t),this.$adultsSelector=e.find("select[name=group_adults]"),this.$roomsSelector=e.find("select[name=no_rooms]"),this.$childrenSelector=e.find("select[name=group_children]"),this.$element.delegate("select[name=group_adults],select[name=no_rooms],select[name=group_children]","change",_.proxy(this.onChange,this)),this.onInit(),_r_()},B.Search.CustomGroupSelector.prototype=new B.Search.AbstractGroupConfigurationWidget,B.Search.CustomGroupSelector.prototype.DISABLED_CLASS="b-form-custom-group_disabled",B.Search.CustomGroupSelector.prototype.getConfig=function(){_i_("9fc:f44f9e7c");var e=this.$adultsSelector.val(),t=this.$roomsSelector.val(),a=this.$childrenSelector.val(),r={};return e&&!isNaN(parseInt(e,10))&&(r.adults=parseInt(e,10)),t&&!isNaN(parseInt(t,10))&&(r.rooms=parseInt(t,10)),a&&!isNaN(parseInt(a,10))&&(r.children=parseInt(a,10)),_r_(r)},B.Search.CustomGroupSelector.prototype.onChange=function(e){_i_("9fc:88c78cea");var t=this.getConfig();"function"==typeof this.options.onChange&&this.options.onChange.call(this,t),_r_()},B.Search.CustomGroupSelector.prototype.onExternalEventModeChanged=function(e){_i_("9fc:44390a85"),"basic"===e.mode?this.hide():this.show(),_r_()},B.Search.CustomGroupSelector.prototype.onExternalEventConfigChanged=function(e){var t;_i_("9fc:fb3acd4b"),e.adults!==t&&this.$adultsSelector.val(e.adults),e.rooms!==t&&this.$roomsSelector.val(e.rooms),e.children!==t&&this.$childrenSelector.val(e.children),"basic"===e.type?this.hide():this.show(),_r_()},B.Search.ChildrenAgesSelector=function(e,t){_i_("9fc:252aa8721"),this.initialize.apply(this,[].slice.call(arguments,0)),this.initEvents(),this.onInit(),_r_()},B.Search.ChildrenAgesSelector.prototype=new B.Search.AbstractGroupConfigurationWidget,B.Search.ChildrenAgesSelector.prototype.show=function(){_i_("9fc:b49faea6"),B.Search.AbstractGroupConfigurationWidget.prototype.show.apply(this),_r_()},B.Search.ChildrenAgesSelector.prototype.initialize=function(e,t){_i_("9fc:b2ad7187"),this.$element=e,this.$inputsContainer=this.$element.find(".b-custom-element__container"),this.ages=this.getAges(),this.setOptions(t),_r_()},B.Search.ChildrenAgesSelector.prototype.initEvents=function(){_i_("9fc:cf161459"),this.$element.delegate("select[name=age]","change",_.proxy(this.onChange,this)),this.$inputsContainer.find(".b-custom-element__label").bind("click",_.proxy(this.onLabelClick,this)),_r_()},B.Search.ChildrenAgesSelector.prototype.sanitizeInput=function(){_i_("9fc:d56bc696"),this.getInputs().each(function(e,t){_i_("9fc:0fbd9fdb");var a=t.value;a=a.replace(/\D/g,function(e){return _i_("9fc:c5e0e7f4"),_r_(B.Search.SPECIAL_DIGITS.hasOwnProperty(e)?B.Search.SPECIAL_DIGITS[e]:e)}),t.value=a,_r_()}),_r_()},B.Search.ChildrenAgesSelector.prototype.onChange=function(){_i_("9fc:e1b4b538"),this.sanitizeInput();var e=this.getConfig();"function"==typeof this.options.onChange&&this.options.onChange.call(this,e),_r_()},B.Search.ChildrenAgesSelector.prototype.onLabelClick=function(e){_i_("9fc:ffddd264"),e.preventDefault();var t=this.getInputs(),a=t.filter(function(){return _i_("9fc:93e728f6"),_r_(""==this.value)}).first();a.length?a.focus():t.first().focus(),_r_()},B.Search.ChildrenAgesSelector.prototype.DISABLED_CLASS="b-form-children-ages_disabled",B.Search.ChildrenAgesSelector.prototype.onExternalEventGroupInvalid=function(e){_i_("9fc:73606730"),this.showErrorMessages(e.messages),_r_()},B.Search.ChildrenAgesSelector.prototype.onExternalEventGroupValid=function(e){_i_("9fc:647e9c33"),this.hideErrorMessages(e.messages),_r_()},B.Search.ChildrenAgesSelector.prototype.onExternalEventConfigChanged=function(e){_i_("9fc:27e51338");for(var t=this.getAges(),a=e.childrenAges,r=0;r<a.length;r++)void 0===a[r]&&(a[r]=t[r]);0===a.length?this.hide():(a.length===t.length&&a.join(",")===this.serialize()||this.render(a),this.show()),_r_()},B.Search.ChildrenAgesSelector.prototype.getInputs=function(){return _i_("9fc:06523070"),_r_(this.$inputsContainer.find(".b-children-ages-configurator__element"))},B.Search.ChildrenAgesSelector.prototype.getConfig=function(){return _i_("9fc:96c04ef2"),_r_({childrenAges:this.getAges()})},B.Search.ChildrenAgesSelector.prototype.getAges=function(){_i_("9fc:204d3c9f");var e=this.getInputs(),a=[];return e.each(function(e,t){_i_("9fc:c067ecec"),_(t).find(":selected").hasClass("sb_child_ages_empty_zero")?a.push(void 0):a.push(t.value),_r_()}),this.ages=a,_r_(a)},B.Search.ChildrenAgesSelector.prototype.serialize=function(){return _i_("9fc:eb91f1a3"),_r_(this.ages.join(","))},B.Search.ChildrenAgesSelector.prototype.renderLabel=function(e){_i_("9fc:fbb33d29");var t=null,a=null,r=null,i=null,n=null,o=B.require("formatting/date"),s=B.search.dates("checkout"),c=this.$element.find(".b-custom-element__label");"valid"===s.type?(t={day:s.date,month:s.month,year:s.year},r=B.jstmpl.translations("bh_gsb_search_box_checkout_age",null,{date:o.format(t,"short_date")}),a=B.jstmpl.translations("bh_gsb_search_box_checkout_age_plural",null,{date:o.format(t,"short_date")}),c.text(1==e?r:a),"city"===B.env.b_action&&(i=_(".lp_bold_date_picker_lightbox_clear.plural"),n=_(".lp_bold_date_picker_lightbox_clear.singular"),i.text(a),n.text(r))):(a=B.jstmpl.translations("loc_sbox_children_age_plural"),r=B.jstmpl.translations("loc_sbox_children_age_singular"),c.text(1==e?r:a)),_r_()},B.Search.ChildrenAgesSelector.prototype.render=function(e){_i_("9fc:ceb15269");var t,a=e.length,r="";this.$inputsContainer.find(".b-children-ages-configurator__element").remove(),this.renderLabel(a);for(var i=0;i<a;i++)t=0<=e[i]?e[i]:"",r+=this.renderSelector(t);this.$inputsContainer.append(r),_r_()},B.Search.ChildrenAgesSelector.prototype.renderSelector=function(e,t,a){_i_("9fc:4b4160e1");var r='<select name="age" class="b-children-ages-configurator__element b-children-ages-configurator__element_selector js-multi-room-ages">';if(e)e=parseInt(e,10)||0;else"index"===B.env.b_action||"hotel"===B.env.b_action||"searchresults"===B.env.b_action?r+='<option class="sb_child_ages_empty_zero" value="12 " selected="selected"></option>':r+='<option class="sb_child_ages_empty_zero" value="0 " selected="selected"></option>';for(var i=0;i<=17;i++)r+="<option "+(0===i?'class="sb_child_ages_not_empty_zero"':"")+' value="'+i+'" '+(i===e?"selected":"")+">"+i+"</option>";return _r_(r+="</select>")},B.Search.createWidgetPlugin("predefinedGroupSelector",B.Search.PredefinedGroupSelector),B.Search.createWidgetPlugin("customGroupSelector",B.Search.CustomGroupSelector),B.Search.createWidgetPlugin("childrenAgesSelector",B.Search.ChildrenAgesSelector),_r_({init:function(){_i_("9fc:c1b7917b"),_(".b-form-predefined-group").predefinedGroupSelector({onChange:function(e){_i_("9fc:278e3b33"),"basic"===e.type?B.search.group().mode("basic"):B.search.group().mode("custom"),"more_options"!==e.type&&B.search.group(e),"more_options"===e.type?B.Search.tracker.trackEvent(B.Search.TrackingEvents.GROUP_ADVANCED_MODE_SELECTED):"basic"===e.type&&2===e.adults&&1===e.rooms&&0===e.children?B.Search.tracker.trackEvent(B.Search.TrackingEvents.GROUP_BASIC_MODE_SELECTED):"basic"===e.type&&B.Search.tracker.trackEvent(B.Search.TrackingEvents.GROUP_PREDEFINED_OPTION_SELECTED),_r_()},onInit:function(e){_i_("9fc:ab39ba92"),"basic"===e.type?B.search.group().mode("basic"):B.search.group().mode("custom"),_r_()}}),_(".b-form-custom-group").customGroupSelector({onChange:function(e){_i_("9fc:93360e95");var t=B.search.group().value;t.adults!==e.adults&&B.Search.tracker.trackEvent(B.Search.TrackingEvents.GROUP_ADULTS_NUMBER_CHANGED),t.rooms!==e.rooms&&B.Search.tracker.trackEvent(B.Search.TrackingEvents.GROUP_ROOMS_NUMBER_CHANGED),t.children!==e.children&&B.Search.tracker.trackEvent(B.Search.TrackingEvents.GROUP_CHILDREN_NUMBER_CHANGED),B.search.group(e),_r_()},onInit:function(e){_i_("9fc:632a9362"),"basic"!==B.search.group().mode()&&this.show(),_r_()}}),_(".b-form-children-ages").childrenAgesSelector({onChange:function(e){_i_("9fc:6d891474"),B.search.group("childrenAges",e.childrenAges),B.Search.tracker.trackEvent(B.Search.TrackingEvents.GROUP_CHILDREN_AGE_CHANGED),_r_()},onInit:function(e){_i_("9fc:94e4a26b"),0<e.childrenAges.length?this.show():this.hide(),B.eventEmitter.bind(B.Search.Events.DATE_CHANGED,function(e,t){_i_("9fc:cf34c89d"),"checkout"===t.type&&this.renderLabel(this.getConfig().childrenAges.length),_r_()}.bind(this)),B.eventEmitter.bind(B.Search.Events.DATE_INVALID,function(e,t){_i_("9fc:c1820512"),this.render(this.getConfig().childrenAges),_r_()}.bind(this)),B.eventEmitter.bind(B.Search.Events.DATE_MONTH_CHANGED,function(e,t){_i_("9fc:c18205121"),this.render(this.getConfig().childrenAges),_r_()}.bind(this)),_r_()}}),B.eventEmitter.bind(B.Search.Events.GROUP_MODE_CHANGED,function(e,t){_i_("9fc:21e7c8ad"),_.fn.predefinedGroupSelector("notify","groupModeChanged",t),_.fn.customGroupSelector("notify","groupModeChanged",t),_.fn.childrenAgesSelector("notify","groupModeChanged",t),B.search.group().validate("reset"),_r_()}),B.eventEmitter.bind(B.Search.Events.GROUP_CHANGED,function(e,t){_i_("9fc:4d4604ae"),_.fn.predefinedGroupSelector("notify","groupChanged",t),_.fn.customGroupSelector("notify","groupChanged",t),_.fn.childrenAgesSelector("notify","groupChanged",t),_r_()}),B.eventEmitter.bind(B.Search.Events.GROUP_INVALID,function(e,t){_i_("9fc:2573ae36");for(var a=t.validators,r=[],i=[],n=0;n<a.length;n++)a[n].validationParameters.invalidAges&&r.push(a[n].validationParameters.invalidAges),a[n].message&&i.push(a[n].message);_.fn.childrenAgesSelector("notify","groupInvalid",{messages:i,agesStatus:r}),_r_()}),B.eventEmitter.bind(B.Search.Events.GROUP_VALID,function(e,t){_i_("9fc:d342921b"),_.fn.childrenAgesSelector("notify","groupValid",{message:"message",agesStatus:[]}),_r_()}),_("#frm").bind("submit",function(e){return _i_("9fc:56e29a32"),_r_(B.search.group().validate())}),_r_()}})}();B.when({events:"ready"}).run(function(e){_i_("9fc:1495879e"),t.init(),_r_()}),_r_()}(),B.define("main/calendar2-init",function(e,t,a){"use strict";_i_("9fc:b7f84adb");var c=e("jquery"),_=e("hijri-calendar"),o=B.env,r=!1,n="www"===B.env.b_site_type&&-1<B.env.b_action.indexOf("cars");function i(){_i_("9fc:2caed68e"),B.search.dates("checkin")||c("#homein").find(".calendarLink").trigger("show"),_r_()}function s(e,a){_i_("9fc:85bee045");var t=a.search||B.search,r=t.dates("checkin"),i=t.dates("checkout"),n=t.dates(a.type),o=r&&i&&"valid"===r.type&&"valid"===i.type;c.fn.calendar2("each",function(e){if(_i_("9fc:f6856f51"),a.search&&a.search!==e.search)return _r_();if(e.type()===a.type&&("month"===n.type?e.trigger("monthSelected",{type:a.type,value:n}):"valid"===n.type&&e.trigger("dateSelected",{type:a.type,value:n})),o&&("checkin"===e.type()||"checkout"===e.type())){e.trigger("rangeSelected",{type:a.type,startValue:r,endValue:i});var t=i.valueOf()-r.valueOf();b(e,r,i,t)}_r_()}),_r_()}function l(e,t){_i_("9fc:0a0d1450"),c.fn.calendar2("each",function(e){_i_("9fc:ae7b1e7b"),e.adjustHeight(!0),t.id!==e.id()&&e.hide(),"calendar_6"!=t.id&&"calendar_7"!=t.id||(_.disable(),c(".hijri-toggle-2").removeClass("active")),_r_()}),_r_()}function h(){_i_("9fc:9e95e903"),c.fn.calendar2("hide"),_r_()}function d(e){return _i_("9fc:7c9619bf"),_r_(e.getHours()<2)}function u(){_i_("9fc:618e1af6");var e=B.calendar2.today();return B.env.b_search_max_months?(e.setMonth(e.getMonth()+B.env.b_search_max_months),e.setDate(0)):e=new Date(e.getFullYear()+1,e.getMonth()+1,0),_r_(e)}function f(e,t,a){_i_("9fc:caf2d5de");var r=this.search||B.search;if(!e&&!t)return _r_();var i,n,o=e.type();r.dates(o,{year:t.getYear(),month:t.getMonth(),date:t.getDate()}),i=r.dates("checkin"),n=r.dates("checkout"),"valid"===i.type&&("invalid"===n.type?r.dates("checkout",r.dates("checkin").addDays(1)):n<i&&r.dates("checkout",r.dates("checkin").addDays(1))),"valid"===n.type&&"invalid"===i.type&&r.dates("checkin",r.dates("checkout").addDays(-1)),e&&e.$element&&0<e.$element.parents(".b-searchbox").length&&("checkin"===o?B.Search.tracker.trackEvent(B.Search.TrackingEvents.CHECKIN_DATEPICKER):"checkout"===o&&B.Search.tracker.trackEvent(B.Search.TrackingEvents.CHECKOUT_DATEPICKER)),e.$input.focus(),_r_()}function p(e,t){_i_("9fc:5843c67e"),13!==t.which||e.shown()||(c("#frm").submit(),t.preventDefault()),_r_()}function g(t){_i_("9fc:20f32780");var e,a,r=t.search||B.search,i=r.dates("checkout"),n=r.dates("checkin"),o=n&&i&&"valid"===n.type&&"valid"===i.type,s=t.type();"checkin"===s?"valid"===n.type?(e="dateSelected",a=n):"month"===n.type&&(e="monthSelected",a=n):"checkout"===s&&("valid"===i.type?(e="dateSelected",a=i):"month"===i.type&&(e="monthSelected",a=i)),e&&a&&t.trigger(e,{type:s,value:a}),o&&t.trigger("rangeSelected",{startValue:n,endValue:i}),b(t,n,i,i.valueOf()-n.valueOf()),_.available()&&(c(".c2-wrapper-s-"+s+" .c2-calendar-header").contents().filter(function(){return _i_("9fc:f2ef9c81"),_r_(3===this.nodeType)}).replaceWith(C(s)),_.enabled()&&t.addState("hijri-enabled"),t.$calendarElement.delegate(".c2-calendar-header_hijri-toggle","click",function(e){_i_("9fc:0ca9321c"),e.preventDefault(),_.enabled()?_.disable():_.enable(),t.adjustHeight(!0),_r_()})),_r_()}function m(e,t){_i_("9fc:c6d08528");var a,r,i="";if(B.env.b_year_months[e+"-"+(t+1)]&&(i=B.env.b_year_months[e+"-"+(t+1)].name),_.available()){var n=_.convert({year:e,month:t,day:1}),o=_.convert({year:e,month:t,day:B.calendar2.DAYS_IN_MONTH[t]});i+=B.jstmpl("hijri_month").render({monthTitleAddition:(a=n,r=o,_i_("9fc:ac589504"),a.year&&r.year&&a.year!==r.year?_r_(B.jstmpl.translations("ar_islamic_calendar_two_years",null,{first_hijri_month:B.jstmpl.translations(a.hijri_month_tag),second_hijri_month:B.jstmpl.translations(r.hijri_month_tag),first_year:a.hijri_year,second_year:r.hijri_year})):a.hijri_month_tag&&r.hijri_month_tag&&a.hijri_month_tag!==r.hijri_month_tag?_r_(B.jstmpl.translations("ar_islamic_calendar_two_months",null,{first_hijri_month:B.jstmpl.translations(a.hijri_month_tag),second_hijri_month:B.jstmpl.translations(r.hijri_month_tag),year:a.hijri_year})):_r_(B.jstmpl.translations("ar_islamic_calendar_no_month_change",null,{hijri_month:B.jstmpl.translations(a.hijri_month_tag),year:a.hijri_year})))})}return _r_(i)}var v="hover";function y(e,t){var a,r,i,n,o;_i_("9fc:c6092484");var s=this.search||B.search;if(t&&t.hasState("disabled"))return _r_();if(window.clearTimeout(e.rangeHighlightTimeout),"checkin"===e.type()?(a=t.id(),i=B.Search.createDate({year:t.year_,month:t.month_,date:t.date_}),n=s.dates("checkout"),r=B.calendar2.dayId(n.year,n.month,n.date)):"checkout"===e.type()&&(i=s.dates("checkin"),a=B.calendar2.dayId(i.year,i.month,i.date),n=B.Search.createDate({year:t.year_,month:t.month_,date:t.date_}),r=t.id()),i&&"valid"===i.type&&n&&"valid"===n.type&&0<(o=n.valueOf()-i.valueOf())){if(e.unHighlightRange(v),e.selectedRange_)for(var c=0,_=e.selectedRange_.length;c<_;c++)e.days[e.selectedRange_[c]].removeState("first-in-range").removeState("in-range").removeState("last-in-range");e.highlightRange(a,r,{name:v}),b(e,i,n,o)}_r_()}function b(e,t,a,r){if(_i_("9fc:b81f6b95"),!n){var i="";t&&a&&(i=function(e,t,a){if(_i_("9fc:806646cf"),0<a&&e&&"valid"===e.type&&t&&"valid"===t.type){return _r_(B.jstmpl("length_of_stay_detailed").render({b_interval:a,b_checkin_date_formatted:B.formatter.date(e.toString(),"short_date_with_weekday_without_year"),b_checkout_date_formatted:B.formatter.date(t.toString(),"short_date_with_weekday")}))}return _r_("")}(t,a,r),_.available()&&(i+=B.jstmpl("hijri_footer_warning").render())),""!==i&&e.$element.find(".c2-calendar-footer-dynamic").html(i)}_r_()}function S(e,t){var a;_i_("9fc:3a9426bc"),t===v&&(a=e.getSelectedDay())&&a.removeState("selected"),_r_()}function D(e,t){_i_("9fc:fe0b1dca");var a=this.search||B.search;e.rangeHighlightTimeout=window.setTimeout(function(){_i_("9fc:66da1b50"),e.rangeHighlightTimeout&&(e.unHighlightRange(v),e.selectedRange_&&e.selectedRange_.length&&e.createRange_(e.selectedRange_,"selected"),b(e,a.dates("checkin"),a.dates("checkout"),a.dates("checkout").valueOf()-a.dates("checkin").valueOf())),_r_()},100),_r_()}function C(e){_i_("9fc:1b85fcc3");var t="";return _.available()&&(t+=B.jstmpl("hijri_toggle").render({type:e||this.type(),hijri_visible:!1})),_r_(t)}function E(e){_i_("9fc:7fd7c3f7"),c.fn.calendar2("each",function(e){_i_("9fc:2eb6f053"),e.addState("hijri-enabled"),_r_()}),_r_()}function A(e){_i_("9fc:ae4e4812"),c.fn.calendar2("each",function(e){_i_("9fc:b6758f2b"),e.removeState("hijri-enabled"),_r_()}),_r_()}function k(){_i_("9fc:0e7a37d6");var e=o.sunday_first,t=o.b_simple_weekdays.slice(0),a=o.b_short_months;e&&t.unshift(t.pop());var r=B.calendar2.generalOptions={dayNames:t,sundayFirst:e,monthNames:a,direction:o.rtl?"rtl":"ltr",lazy:!0,closeButton:!0,onDateSelected:f,onLazyInitiated:g,monthTitle:m,onKeyDown:p,onRangeHighlighted:S,onDayMouseEnter:y,onDayMouseLeave:D,arrow:!0,search:B.search};B.env.b_sb_prices&&(r.pricePlaceHolder=!0),B.env.fe_sb_rentalcars&&(r.showStartEndTimes=!0);var i=B.calendar2.checkinOptions=c.extend({},r,{type:"checkin",defaultDate:B.search.dates("checkin"),startDate:function(){_i_("9fc:036271e9");var e=new Date;return d(e)&&e.setDate(e.getDate()-1),_r_(e)}(),endDate:function(){_i_("9fc:9dd62850");var e=u();return e.setDate(e.getDate()-1),_r_(e)}(),title:_.available()?C:o.transl_checkin_title}),n=B.calendar2.checkoutOptions=c.extend({},r,{type:"checkout",defaultDate:B.search.dates("checkout"),startDate:function(){_i_("9fc:55285047");var e=B.calendar2.today();return d(new Date)&&e.setDate(e.getDate()-1),e.setDate(e.getDate()+1),_r_(e)}(),endDate:u(),title:_.available()?C:o.transl_checkout_title});return _r_({checkinOptions:i,checkoutOptions:n})}function w(){if(_i_("9fc:5ed3b528"),r)return _r_();r=!0,B.eventEmitter.bind("SEARCH:destination_selected",i),B.eventEmitter.bind("SEARCH:date_changed",s),B.eventEmitter.bind("SEARCH:month_changed",s),B.eventEmitter.bind("CALENDAR:opened",l),B.eventEmitter.bind("AUTOCOMPLETE:opened",h),B.eventEmitter.bind("CALENDAR:hijri_enabled",E),B.eventEmitter.bind("CALENDAR:hijri_disabled",A),B.maps&&"function"==typeof B.maps.on&&B.maps.on("click-open",h),_r_()}a.exports={init:function(){if(_i_("9fc:d26cd8a4"),!B.env.b_calendar2)return _r_();if(!B.calendar2||B.env.b_is_tdot_traffic&&"book"===B.env.b_action&&2===B.env.b_book_stage)return _r_();var e=c(".calendarLink, .b-datepicker");if(0===e.length)return _r_();var n=k();e.each(function(e,t){_i_("9fc:e1b970d7");var a=c(t),r=a.attr("rel")||a.data("type")||a.data("calendar2-type"),i={};a.unbind("click.calendar"),a.unbind("click.calendar2"),a.data("calendar2-align-right")&&(i.alignToRight=1),"checkin_year_month"===r||"checkin"===r?a.calendar2(c.extend({},n.checkinOptions,i)):"checkout_year_month"!==r&&"checkout"!==r||a.calendar2(c.extend({},n.checkoutOptions,i)),_r_()}),w(),B.eventEmitter.trigger("CALENDARS:initialized"),_r_()},initCalendars:function(e,t){if(_i_("9fc:d905b7b6"),!B.env.b_calendar2)return _r_();if(!B.calendar2||B.env.b_is_tdot_traffic&&"book"===B.env.b_action&&2===B.env.b_book_stage)return _r_();w();var a=k();e.calendar2(a.checkinOptions),t.calendar2(a.checkoutOptions),_r_()}},_r_()}),B.when({events:"ready"}).require(["main/calendar2-init"],function(e){_i_("9fc:361082aa"),e.init(),_r_()});