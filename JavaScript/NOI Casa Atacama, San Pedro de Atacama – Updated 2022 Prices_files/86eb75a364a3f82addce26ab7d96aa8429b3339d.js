var _i_=this._i_||function(){},_r_=this._r_||function(e){return e};_i_("a9a:8c696b8b"),B.define("hotel/utils/rooms-selected-copy",function(e){return _i_("a9a:861b63ef"),_r_(function(e,t){_i_("a9a:1c61f9f3");var a,o="<strong>"+t+"</strong>";switch(1<e.length?"0":e[0]||"0"){case"29":a="hp_book_now_summary_holidayhomes";break;case"31":a="hp_book_now_summary_villas";break;case"1":a="hp_book_now_summary_apartments";break;case"28":a="hp_book_now_summary_chalet";break;case"27":a="hp_book_now_summary_bungalow";break;case"26":a="hp_book_now_summary_dorm_beds";break;case"33":a="hp_book_now_summary_alt"}return _r_(a?B.jstmpl.translations(a,t,{b_count:o}):B.jstmpl.translations("hp_book_now_summary_room",t,{number_rooms:o}))})}),B.define("hotel/utils/rooms-selected-copy-us",function(e){return _i_("a9a:2a483aef"),_r_(function(e,t,a,o,r){_i_("a9a:99acef55");var n,i,_=t+"";switch(1<e.length?"0":e[0]||"0"){case"29":n="pd_rb_rt_us_exp_num_holiday_homes";break;case"31":n="pd_rb_rt_us_exp_num_villas";break;case"1":n="pd_rb_rt_us_exp_num_apartments";break;case"28":n="pd_rb_rt_us_exp_num_chalets";break;case"27":n="pd_rb_rt_us_exp_num_bungalows";break;case"26":n="pd_rb_rt_us_exp_num_dorm_beds"}i=n?B.jstmpl.translations(n,t,{b_count:_}):B.jstmpl.translations("pd_rb_rt_us_exp_num_rooms",t,{num:_});var s=B.jstmpl.translations("pd_rb_rt_us_exp_num_nights",a,{num:a}),l=B.jstmpl.translations("pd_rb_rt_us_exp_num_adults",o,{num:o});if(r){var c=B.jstmpl.translations("pd_rb_rt_us_exp_num_children",r,{num:r});return _r_(B.jstmpl.translations("pd_rb_rt_us_exp_num_nights_adults_children_rooms",null,{pd_rb_rt_us_exp_num_nights:s,pd_rb_rt_us_exp_num_adults:l,pd_rb_rt_us_exp_num_children:c,pd_rb_rt_us_exp_num_rooms:i}))}return _r_(B.jstmpl.translations("pd_rb_rt_us_exp_num_nights_adults_rooms",null,{pd_rb_rt_us_exp_num_nights:s,pd_rb_rt_us_exp_num_adults:l,pd_rb_rt_us_exp_num_rooms:i}))})}),B.define("component/hotel/new-rooms-table/cheapest-seen-block",function(e,t,a){_i_("a9a:118af289");var r=e("jquery"),o=e("component"),n=B.require("search-config");function i(a,e){if(_i_("a9a:3eb493ef"),n.isGroupSearch)return _r_();var t=[B.env.b_ufi,B.env.b_checkin_date,B.env.b_checkout_date,+n.adults].join("_"),o={method:"GET",dataType:"json",url:"/is_cheapest",data:{hotel_id:B.env.b_hotel_id,search_key:t}};r.ajax(o).done(function(e){var t;_i_("a9a:24519ca5"),!e.b_first&&e.is_the_cheapest?((t=a.closest("tr").prev()).find(".hprt-table-cell-price").addClass("hprt-table-cheapest-block-arrow"),a.addClass("hprt-table-cheapest-block-banner-active"),a.closest("tr.js-hprt-cheapest-block-row").addClass("hprt-cheapest-block-row-active"),t.is(".js-hprt-table-cheapest-block")&&t.addClass("hprt-table-cheapest-block-active")):((t=a.closest("tr").prev()).find(".hprt-table-cell-price").removeClass("hprt-table-cheapest-block-arrow"),a.removeClass("hprt-table-cheapest-block-banner-active"),a.closest("tr.js-hprt-cheapest-block-row").removeClass("hprt-cheapest-block-row-active"),t.is(".js-hprt-table-cheapest-block")&&t.removeClass("hprt-table-cheapest-block-active")),_r_()}),_r_()}a.exports=o.extend({init:function(){_i_("a9a:1356e94d");var e=this.$el;i(e),r(window).bind("focus",function(){_i_("a9a:fb03e730"),i(e),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/lightbox",function(e,t,a){_i_("a9a:582b7b83");var o=e("component"),c=e("et"),d=e("jquery"),i=e("lightbox"),h=e("events"),u=B.require("ga-tracker"),b=e("hotel/rooms_table/lightbox/gallery"),_=e("querystring"),r={},n=0,p=!1,s=!1,l=!1,f=!1,m="ZdZbaTaTaBBUcJPQfQAYfeDIVaKEcNTBPWZJae",v=c.track(m);function g(e){if(_i_("a9a:42b1771b"),(!s||!l||!f)&&e.data("room-id")){var t="RD"+e.data("room-id");r[t]?r[t]+=1:(r[t]=1,n+=1,s||(c.goal("hp_rt_roomtype_lightbox_opened"),s=!0)),!l&&1<r[t]&&(c.goal("hp_lightbox_opened_more_than_once"),l=!0),!f&&1<n&&(c.goal("hp_lightbox_opened_for_different_rooms"),f=!0)}_r_()}function k(o){return _i_("a9a:aadec937"),_r_(function(){_i_("a9a:e592f4d5");var e=o.data("room-id"),t=d("[name=RD"+e+"]").parents(".hprt-table-cell").first();if(!B.feature||!B.feature.transition||!B.env.b_has_maxotel_rooms)return _r_();if(!t.length)return _r_();c.stage(m,2),c.customGoal(m,1),v||(function(e){_i_("a9a:6268d6b0");var t="hprt-table-cell-roomtype--highlight";e.addClass(t),setTimeout(function(){_i_("a9a:a76a05f5"),e.removeClass(t),_r_()},500),_r_()}(t),function(e){_i_("a9a:853ed1b3");var t="roomType--highlight hprt-table-cell-roomtype--active";d(".hprt-table").find(".hprt-table-cell.-first").removeClass(t),e.addClass(t),_r_()}(t));var a=o.data("LightboxGallery");a&&a.pauseSlick&&a.pauseSlick(),u.trackEvent(u.hotelPageTracker,"Hotel: Lightbox closed","Click on close button"),location.hash="_",_r_()})}function y(t,e){_i_("a9a:ea7590b6");var a={customWrapperClassName:"hprt-lightbox--wrapper hprt-lightbox--two_column_layout hprt-lightbox--wrapperwider",bOverflowVisible:!0,position:"dynamic",hideCallBack:k(t),trapFocus:!0};i.show(t,a);var o=t.data("room-id"),r="room_"+o;location.hash=r;var n=t.find('[data-component="room-lightbox-async"]');n.data("RoomLightboxEventsBinded")||(n.data("RoomLightboxEventsBinded",!0),B.events.on(B.hotel.Events.RT.LIGHTBOX_LOADED_ASYNC,function(e){_i_("a9a:eede5d9b"),o==e.roomId&&e.success&&(x(t),i.rePosition(),setTimeout(function(){_i_("a9a:e05bf8ef"),i.rePosition(),_r_()},250)),_r_()})),n.length?n.first().component("room-lightbox-async").load():x(t),_r_()}function x(e){_i_("a9a:a6fccb98");var t=e.data("room-id"),a=e.find(".hprt-lightbox-gallery-container");if(a.length&&!a.hasClass("slicked")){a.addClass("slicked");var o=new b(a);e.data("LightboxGallery",o),a.find('[data-gallery=""]').one("click.tracking",function(){_i_("a9a:e62b85de"),c.goal("hp_lb_gallery_clicks_photo"),_r_()});var r=a.find(".hp-gallery-control");r.on("click.tracking",function(e){_i_("a9a:67de6dcb"),e.hasOwnProperty("originalEvent")&&(c.goal("hp_lb_gallery_clicks_arrows"),r.off("click.tracking")),_r_()}),a.find("a.js-hotel-thumb").one("mouseenter.tracking click.tracking",function(){_i_("a9a:ccce1eb9"),c.goal("hp_lb_gallery_used_thumbs"),_r_()}),g(e)}else(o=e.data("LightboxGallery"))&&o.playSlick&&o.playSlick(),a.length&&g(e);var n=e.find(".inline-feedback_lightbox");if(n.length){var i=0<e.find(".b-button_primary").length,_=parseInt(n.data("opened_count"));_?_+=1:_=1,n.data("opened_count",_),(2<_||!i)&&n.removeClass("g-hidden")}h.off("feedbackInline:close_lightbox").on("feedbackInline:close_lightbox",C),h.trigger(B.hotel.Events.RT.LIGHTBOX_OPEN_NEW,t,e);var s=d('a.hprt-roomtype-link[href="#RD'+t+'"]');if(0<s.length){var l=s.data("room-name");l&&u.trackEvent(u.hotelPageTracker,"Hotel: Lightbox opened",l)}setTimeout(function(){_i_("a9a:4c6707db");try{if("undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var e=document.createEvent("CustomEvent");e.initEvent("scroll",!1,!1),window.dispatchEvent(e)}}catch(e){}_r_()},100),p||isNaN(t)||(p=!0,c.track("ZdZbaTaTaBBUcJPQfQAYbAPNOSTUWe")&&(p=!1,c.customGoal("ZdZbaTaTaBBUcJPQfQAYbAPNOSTUWe",2)),d.ajax({method:"POST",dataType:"json",url:"/hotel_lightbox_opened",data:{hotel_id:B.env.b_hotel_id,room_id:t}})),_r_()}function C(){_i_("a9a:4fb8ca4d"),i.hide(),_r_()}a.exports=o.extend({init:function(e){_i_("a9a:0d84b96a");var t=this.$el,a=t.data("room-id");setTimeout(function(){_i_("a9a:e2ea9c6a"),function(e){_i_("a9a:c71d4121");var t=e.data("room-id"),a=_.parseUrl(location.href).query.activeTab;if(1==location.hash.indexOf("room")&&(a=location.hash.slice(1)),!a)return _r_();var o=a.match(/room_([0-9]*)_?.*/);if(!o||o.length<2||!o[1])return _r_();t==o[1]&&y(e),_r_()}(t),_r_()},500);var o=d('.hprt-roomtype-link[data-room-id="'+a+'"]');if(!o.length)return _r_();o.click(function(e){_i_("a9a:1d611caf"),e.preventDefault(),y(t),_r_()});var r=d(".gr-toggle-room-lightbox");if(r.length)for(var n=0;n<r.length;n++)o.attr("href")===d(r[n]).attr("href")&&d(r[n]).bind("click",function(e){_i_("a9a:b20c48b2"),e.preventDefault(),y(t),_r_()});var i=d(".main-gallery-toggle-room-lightbox");if(i.length)for(n=0;n<i.length;n++)o.data("roomId")===d(i[n]).data("roomId")&&d(i[n]).bind("click",function(e){_i_("a9a:7d6ceceb"),e.preventDefault(),y(t,d(this).data("isGroupRecommendation")),_r_()});_r_()},show:y}),_r_()}),B.define("component/hotel/new-rooms-table/summary/best-price",function(e,t,a){_i_("a9a:c3444c52");var o=e("component"),r=e("hotel/store"),n=e("jstmpl"),i=/^bbasic_/i,_=e("et");a.exports=o.extend({init:function(){_i_("a9a:8879f9c7"),r.subscribe(function(){if(_i_("a9a:f787ecd1"),_.track_experiment("d_pd_hp_rt_remove_jackpot_step3"))return _r_();var e=r.getState().roomsTable.js_selection,t=$(".hp_rt_attr_msg");1==B.env.b_is_group_search?2==e.fitStatus?this.toggleJackpotMessage(e,t):this.$el.hide():this.toggleJackpotMessage(e,t),_r_()}.bind(this)),_r_()},toggleJackpotMessage:function(e,t){_i_("a9a:b47aa7ec");var a=i.test(e.blockIDs[0]||"");if(1!=e.roomCount||2!=e.blocks[e.blockIDs[0]].b_stay_prices.length||a)0<e.roomCount?(this.$el.text(B.jstmpl.translations("hp_rt_jackpot_best_price")),this.$el.show(),t.length&&t.show()):(this.$el.hide(),this.$el.text(""),t.length&&t.hide());else{var o="",r=e.roomTypes[0];-1!==["1","29","31","17","19","26"].indexOf(r)?(o="1"===r?n.translations("pss_rt_jackpot_last_room_dehotelise_apt"):"29"===r?n.translations("pss_rt_jackpot_last_room_dehotelise_hh"):"31"===r?n.translations("pss_rt_jackpot_last_room_dehotelise_villa"):n.translations("pss_rt_jackpot_last_room_dehotelise_option"),this.$el.text(o)):this.$el.text(B.jstmpl.translations("hp_rt_jackpot_last_room")),this.$el.show(),t.length&&t.show()}_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/breakfast-included",function(e,t,a){_i_("a9a:2f389531");var o=e("component"),r=e("hotel/store");a.exports=o.extend({init:function(){_i_("a9a:2addfa3a"),r.subscribe(function(){_i_("a9a:58aa2e40");var t=r.getState().roomsTable.js_selection;0<t.roomCount&&t.blockIDs.every(function(e){return _i_("a9a:5758ec47"),_r_("breakfast"===t.blocks[e].b_mealplan_included_name)})?this.$el.show():this.$el.hide(),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/no-free-cancellation",function(e,t,a){_i_("a9a:f356b893");var o=e("component"),_=e("hotel/store");a.exports=o.extend({init:function(){_i_("a9a:60e1bc34"),_.subscribe(function(){_i_("a9a:9b0b864c");var a=_.getState().roomsTable.js_selection,e=a.blockIDs.reduce(function(e,t){return _i_("a9a:4b0072e8"),"non_refundable"===a.blocks[t].b_cancellation_type?_r_(e+1):_r_(e)},0),t=$(".js-hprt__booking-summary__non-free-wrapper"),o=a.blockIDs.reduce(function(e,t){return _i_("a9a:76b7c3bd"),"special_condition"===a.blocks[t].b_cancellation_type?_r_(e+1):_r_(e)},0);if(0<e||0<o){var r=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body"),n=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body_many_non_free_with_free"),i=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body_many_non_free");t.removeClass("g-hidden"),1===a.roomCount?this.$el.html(r):a.blockIDs.length-e-o!=0?this.$el.html(n):this.$el.html(i),$(".continue_header").removeClass("g-hidden"),this.$el.removeClass("g-hidden")}else $(".continue_header").addClass("g-hidden"),this.$el.addClass("g-hidden"),t.addClass("g-hidden");_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/conditions",function(e,t,a){_i_("a9a:6aeb7f32");var o=e("component"),n=e("hotel/store"),i=/^bbasic_/i,r=e("et"),_="ZdZfZZYfeAZWVPdAeJMET";a.exports=o.extend({init:function(){_i_("a9a:762e4b1a"),n.subscribe(function(){_i_("a9a:6dc07ede");var e=n.getState().roomsTable.js_selection,t=e.blockIDs[0]||"";if(1!==e.roomCount||e.blocks[t].b_is_fflex_price_point||i.test(t))this.$el.empty();else{var a=$('tr[data-block-id="'+t+'"]').find(".hprt-conditions-bui").eq(0),o=e.blocks[t].b_genius_free_room_upgrade,r=this.generateConditionsEl(a,o);this.$el.empty().append(r)}_r_()}.bind(this)),_r_()},generateConditionsEl:function(e,t){_i_("a9a:c431c603");var a=e.clone();a.removeClass("hprt-conditions").addClass("hprt-conditions-summary"),a.find(".jq_tooltip").removeClass("jq_tooltip").removeAttr("data-title title"),a.find(".green_condition").removeClass("green_condition"),a.find(".hprt-green-condition").removeClass("hprt-green-condition"),a.find(".ungreen-condition-green").removeClass("ungreen-condition-green"),a.find(".hprt-item--emphasised").removeClass("hprt-item--emphasised"),a.find(".hprt-checkmark-condition").removeClass("hprt-checkmark-condition"),a.find(".hprt-special-condition").removeClass("hprt-special-condition"),a.find("svg.hprt-nocc-icon").attr("fill","#383838"),a.find(".bui-text--color-constructive").removeClass("bui-text--color-constructive"),a.find("svg.bk-icon").attr("fill","#262626"),t&&(r.customGoal(_,1),r.track(_)?a.find(".room-upgrade-condition").removeClass("u-hidden"):a.find(".room-upgrade-condition").css("display","list-item"));var o=$("<strong>"+B.jstmpl.translations("bp_res_column_details")+"</strong>");return _r_([o,a])}}),_r_()}),B.define("component/hotel/new-rooms-table/reservation-cta",function(e,t,a){_i_("a9a:21bd4208");var o=e("component"),i=e("hotel/store"),_=e("server-data");a.exports=o.extend({init:function(){_i_("a9a:67dc3371");var r=this.$el.find(".js-reservation-button"),e=r.find(".js-reservation-button__text"),n=e.length?e:r;i.subscribe(function(){_i_("a9a:ac32b67e");var e=i.getState().roomsTable,t=e.js_selection,a=t.blockIDs.some(function(e){return _i_("a9a:619f830f"),_r_(t.blocks[e].b_rate_is_genius)});e.formIsSuccessfullySubmitted?r.addClass("bui-is-loading").prop("disabled",!0):r.removeClass("bui-is-loading").prop("disabled",!1);var o=t.blockIDs.filter(function(e){return _i_("a9a:1ab254b5"),_r_(t.blocks[e].b_genius_free_room_upgrade)});t.blockIDs.some(function(e){return _i_("a9a:442891d5"),_r_(t.blocks[e].b_rate_is_cug_business_rate)})&&t.blockIDs.length<2&&(a=!1),_.fe_is_an_rtb_property?n.html(B.jstmpl.translations("web_rtb_rt_request_cta")):o.length&&o.length===t.blockIDs.length?n.html(B.jstmpl.translations("genius_free_room_upgrade_rt_cta")):a?n.html(B.jstmpl.translations("ge_deepen_rt_book_genius_cta")):n.html(B.jstmpl.translations("hp_rt_book_button_reserve")),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/dont-worry",function(e,t,a){_i_("a9a:70e9a9fd");var o=e("component");a.exports=o.extend({init:function(){if(_i_("a9a:e187fbe1"),this.$el.data("alwaysVisible"))return this.$el.text(B.jstmpl.translations("bp_dont_worry_message")),_r_();var a=e("hotel/store");a.subscribe(function(){_i_("a9a:202db018");var t=a.getState().roomsTable.js_selection,e=t.blockIDs.every(function(e){return _i_("a9a:152e49a4"),_r_(t.blocks[e].b_book_now_pay_later)});0<t.roomCount&&e?this.$el.text(B.jstmpl.translations("bp_dont_worry_message")):this.$el.text(""),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/fade",function(e,t,a){_i_("a9a:6a3dab13");var n=e("server-data"),i=e("jquery"),o=e("component"),_=e("hotel/store"),s="hprt-block--genius-room-selected",l="hprt-block--room-selected";a.exports=o.extend({init:function(){_i_("a9a:e8209eae"),_.subscribe(function(){_i_("a9a:30e74349");var t=_.getState().roomsTable.js_selection;this.$el.removeClass(l),this.$el.removeClass(s),0<t.roomCount&&(t.blockIDs.some(function(e){return _i_("a9a:e11750d1"),_r_(1===t.blocks[e].b_rate_is_genius)})&&1===parseInt(n.brand_selected_rooms_genius)?this.$el.addClass(s):this.$el.addClass(l));var e=".roomType--highlight",a=i(".hprt-table").find(".hprt-table-cell.-first");if(a.length&&a.filter(e).length){var o=a.filter(e).find("[name^=RD]");if(o&&o.length&&t.roomIDs&&t.roomIDs.length){var r=o.attr("name").replace("RD","");r&&-1==t.roomIDs.indexOf(r)&&a.removeClass("roomType--highlight hprt-table-cell-roomtype--active")}}_r_()}.bind(this)),_r_()}}),_r_()}),booking.jstmpl("template_reserve_button_tooltip",function(){_i_("a9a:c64344a7");var i,_=["\n    <div class='big_tooltip_x'>\n        <h1>","</h1>\n\n        <p>\n            <strong>\n                ","\n                    ",", ","\n                ","\n            </strong>\n            <br />\n        </p>\n\n        <hr/>\n\n        <p>\n            <strong>"," \n                    ","/private/bh_bp_dates_num_weeks/name","/private/bp_dates_num_nights_1/name","","</strong><br />\n        </p>\n\n        <p>\n            ","/private/check_in/name",": </span>","\n        </p>\n\n        <p>\n            ","/private/check_out/name","\n        </p>\n    </div>\n\n    \n    ","\n\n    ",'\n        <div class="big_tooltip_message">\n            ',"/private/genius_free_room_upgrade_rt_applied/name","\n            ","/private/ge_boost_hp_rt_reserve_button_hover_nongenius/name","/private/hp_rt_reserve_hover_no_account_2_minutes/name","\n        </div>\n    ","\n        ",'\n            <div class="big_tooltip_message big_tooltip_message__green pay_later">\n                ',"/private/hp_rt_pay_at_property/name","\n            </div>\n        ","\n    ","\n\n"],s=["b_hotel_name","b_room_details","b_name","b_interval_in_weeks","b_interval","b_checkin_localized_date_with_weekday","b_checkout_localized_date_with_weekday","b_only_genius_room_upgrade_selected","b_show_great_choice_message","b_user_auth_level","fe_show_tooltip_persuasion_block","b_all_rooms_have_pay_later","b_is_lightbox"];return _r_(function(e){_i_("a9a:3bca0d1f");var t="",a=this.fn;t+=[_[0],a.F.html(a.MC(s[0])),_[1]].join("");var o=a.MC(s[1])||[];e.unshift(null);for(var r=1,n=o.length;r<=n;r++)e[0]=o[r-1],t+=[_[2],a.F.html(a.MC(s[2]))].join(""),a.MJ(r==o.length)||(t+=_[3]),t+=_[4];return e.shift(),t+=_[5],a.MD(s[3])?t+=[_[6],(e.unshift({num_weeks:a.MC(s[3])}),i=a.ME(_[7],a.MB,a.MN,a.MO(a.MC(s[3]),null,_[7])),e.shift(),i),_[4]].join(""):t+=[_[2],(e.unshift({num_nights:a.MC(s[4])}),i=a.ME(_[8],a.MB,a.MN,a.MO(a.MC(s[4]),null,_[8])),e.shift(),i),_[9]].join(""),t+=[_[10],a.ME(_[11],a.MB,a.MN,null),_[12],a.MC(s[5]),_[13],a.ME(_[14],a.MB,a.MN,null),_[12],a.MC(s[6]),_[15]].join(""),a.MN("fe_show_tooltip_persuasion_block",a.MC(s[7])&&a.MC(s[8])||a.MC(s[9])&&a.MC(s[8])||a.MK(a.MC(s[7])||a.MC(s[9]))),t+=_[16],a.MD(s[10])&&(t+=_[17],a.MD(s[7])?(t+=_[4],a.MD(s[8])&&(t+=[_[2],a.ME(_[18],a.MB,a.MN,null),_[4]].join("")),t+=_[19]):a.MD(s[9])?(t+=_[4],a.MD(s[8])&&(t+=[_[2],a.ME(_[20],a.MB,a.MN,null),_[4]].join("")),t+=_[19]):t+=[_[4],a.ME(_[21],a.MB,a.MN,null),_[19]].join(""),t+=_[22]),t+=_[16],a.MK(a.MC(s[12]))&&(t+=_[23],a.MD(s[11])&&(t+=[_[24],a.ME(_[25],a.MB,a.MN,null),_[26]].join("")),t+=_[27]),t+=_[28],_r_(t)})}()),B.define("hotel/rooms-table/reserve-button-tooltip",function(e){_i_("a9a:7ddb7482");var t=e("jquery"),_=e("hotel/store"),s=t(".js-reservation-button"),l=s.attr("data-title"),c=B.jstmpl("template_reserve_button_tooltip"),d={};_.subscribe(function(){_i_("a9a:dbbff778");var t=_.getState().roomsTable.js_selection,e=t.roomIDs.map(function(e){return _i_("a9a:1285ba3b"),_r_(t.rooms[e])}),a=t.blockIDs.filter(function(e){return _i_("a9a:434aeffc"),_r_(t.blocks[e].b_genius_free_room_upgrade)}),o=a.length&&a.length===t.blockIDs.length;s.removeAttr("id").removeAttr("data-tooltip-class"),s.removeData("materialized-id");var r=t.fitStatus,n=Boolean(0===r&&1===Number(B.env.fe_show_fam_d_hp_rt_great_choice_no_fit_blackout));if(0<t.roomCount){d={b_hotel_name:B.env.b_hotel_name,b_interval:B.env.b_checkin_checkout_interval,b_interval_in_weeks:B.env.b_checkin_checkout_interval_in_weeks,b_checkin_localized_date_with_weekday:B.formatter.date(B.env.b_checkin_date,"date_with_weekday"),b_checkout_localized_date_with_weekday:B.formatter.date(B.env.b_checkout_date,"date_with_weekday"),b_check_in_time_translated:B.env.b_check_in_time_translated,b_check_out_time_translated:B.env.b_check_out_time_translated,b_room_details:e,b_user_auth_level:B.env.auth_level,b_only_genius_room_upgrade_selected:o,b_show_great_choice_message:!n};var i=c.render(d);s.attr("data-title",i).attr("data-tooltip-class","submit_holder_button_tooltip")}else d={},s.attr("data-title",l);_r_()}),_r_()}),B.define("component/hotel/new-rooms-table/summary/rooms",function(e,t,a){_i_("a9a:ba33a385");var o=e("component"),n=e("hotel/utils/rooms-selected-copy"),i=e("hotel/store");a.exports=o.extend({init:function(){_i_("a9a:21df8a91"),i.subscribe(function(){_i_("a9a:74dba62e");var e=i.getState().roomsTable.js_selection,t="hprt-reservation-total-price bui-price-display__value",a="",o="";if(0<e.roomCount){if(0<e.totalPriceBeforeDiscount){var r="prco-f-font-body";B.et.track("AEUaYPZZGbIWWNVafFRZeEQLfPZWe")&&(r="bui-price-display__original"),a=' <div class="js-hp-rt-total-strikethrough bui-f-color-destructive prco-f-text-line-through '+r+' prco-inline-block-maker-helper">'+e.totalPriceBeforeDiscountPretty+"</div>&nbsp;",t+=" prco-inline-block-maker-helper"}o="<div>"+a+'<div class="'+t+'">'+e.totalPriceFormatted+"</div></div>",this.$el.html(n(e.roomTypes,e.roomCount)+" "+o),this.$el.find(".hprt-reservation-total-price").one("mouseenter",function(){_i_("a9a:d24142d2"),B.et.goal("desktop_room_list_total_column_hover_over_price"),_r_()}),a&&this.$el.find(".js-hp-rt-total-strikethrough").one("mouseenter",function(){_i_("a9a:2a0c650c"),B.et.goal("desktop_room_list_total_column_hover_over_strikethrough"),_r_()}),this.$el.show()}else this.$el.hide();_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/highlighted-facilities",function(e,t,a){_i_("a9a:de4f0195");var o=e("component"),r=e("et"),n="OOGbdKPZHGabJTBHIDJNMTaDJYBPET";a.exports=o.extend({init:function(){_i_("a9a:3095e98d"),this.$otherFacilities=this.$el.find(".hprt-facilities-others"),this.$accessibleFacilities=this.$el.find(".hprt-accessible-facilities"),this.addEventListeners(),_r_()},addEventListeners:function(){_i_("a9a:c8fd10c6");var o=this.$otherFacilities,t=this.$accessibleFacilities;this.$el.on("click","[data-toggler]",function(e){_i_("a9a:f2ab2a90"),e.preventDefault();var t=$(e.target),a=t.data("roomPosition");o.toggle("fast",function(){_i_("a9a:0299ff6a"),o.is(":visible")?(r.goal("hp_room_facilities_more"),1==a?r.customGoal(n,1):r.customGoal(n,2),t.text(B.jstmpl.translations("hp_rt_info_collapse"))):(r.goal("hp_room_facilities_less"),1===Number(a)?r.customGoal(n,3):r.customGoal(n,4),t.text(B.jstmpl.translations("hp_rt_loc_more"))),_r_()}),_r_()}),this.$el.on("click","[data-toggler-accessibility]",function(e){_i_("a9a:6f884709"),e.preventDefault(),$(e.currentTarget).toggleClass("accordion-open",!t.is(":visible")),t.toggle("fast"),$(e.currentTarget).blur(),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/unit-reviews",function(e,t,a){_i_("a9a:498f2634");var o=e("component"),r=e("et");a.exports=o.extend({init:function(){_i_("a9a:72cf34bd"),this.$unitScores=this.$el.find(".rt-unit-review-score"),this.addEventListeners(),_r_()},addEventListeners:function(){_i_("a9a:860e23f3");var t,e=this.$unitScores;this.$el.on("mouseenter",e,function(e){_i_("a9a:946cad78"),t=setTimeout(function(){_i_("a9a:5960d72e"),r.customGoal("OOFHFfZHQFLFESFDMfQLEHSYO",1),clearTimeout(t),_r_()},2e3),_r_()}),this.$el.on("mouseleave",e,function(e){_i_("a9a:6ed1c005"),clearTimeout(t),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/select-error-tooltip",function(e,t,a){_i_("a9a:1d1a6f7f");var o=e("component"),r=e("jquery"),n=e("hotel/store"),i=e("hotel/redux/actionTypes");a.exports=o.extend({init:function(){_i_("a9a:c6dade78");var a=this.$el,o=r(".hprt-nos-select");a.attr("role","alert"),r("#hprt-form").submit(function(e){if(_i_("a9a:60172861"),!n.getState().roomsTable.js_selection.roomCount){e.preventDefault();var t=o.filter(function(e,t){return _i_("a9a:3b0d9f03"),_r_(60<t.getBoundingClientRect().top)}).get(0)||o.get(0);a.insertAfter(t),a.show().animate({opacity:1},600),r(".hprt-table-room-select").addClass("hprt-table-cell-select-error"),window.setTimeout(function(){_i_("a9a:f6e93812"),a.animate({opacity:0},600,function(){_i_("a9a:ae99e185"),a.hide(),_r_()}),_r_()},4e3),n.dispatch({type:i.SELECT_ROOM_ERROR}),r("select[name^='nr_rooms_']").attr("disabled",!1)}_r_()}),n.subscribe(function(){_i_("a9a:162f178a"),n.getState().roomsTable.js_selection.roomCount&&r(".hprt-table-cell-select-error").removeClass("hprt-table-cell-select-error"),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/select-rooms",function(e,t,a){_i_("a9a:376cb52f");var o=e("component"),r=e("hotel/redux/actionTypes"),l=e("et"),c=e("hotel/store"),d=e("hotel/new-rooms-table/fit-status-helper"),h=e("jquery"),u=B.require("announce-to-screen-reader"),b=e("hotel/utils/rooms-selected-copy");a.exports=o.extend({init:function(){_i_("a9a:529e6aa4");var n=this.$el,i=n.data("room-id"),_=n.data("block-id"),s=n.parents("tr").find("td").not(":first");n.on("change",function(){var e;_i_("a9a:3946fe44"),e="1"===n.attr("data-is-fflex-selected")?n.attr("data-other-block-id"):n.attr("data-block-id"),c.dispatch({type:r.SELECT_ROOM,block_id:e,number_of_rooms:parseInt(n.val(),10),is_fflex_selected:n.attr("data-is-fflex-selected")}),1==B.env.b_is_group_search&&d.update();var t=c.getState().roomsTable.js_selection;u.announce(b(t.roomTypes,t.roomCount)+" "+t.totalPriceFormatted),s.find(".js-strikethrough-price").length&&l.goal("desktop_room_with_strikethrough_selected"),s.find(".c-deals-container").length&&l.goal("desktop_room_with_badge_selected"),_r_()}),c.subscribe(function(){_i_("a9a:a9aadfae");var e=c.getState().roomsTable.js_selection;0<e.roomCount?(l.goal("hp_room_select"),203==+B.env.b_acc_type&&l.goal("hp_hostel_room_select")):0<e.nrSelections&&(l.goal("hp_rt_room_deselect"),203==+B.env.b_acc_type&&l.goal("hp_rt_hostel_room_deselect")),_=n.attr("data-block-id");var t=e.blocks[_];t?(n.val(t.js_nr_selected),t.js_is_highlighted?s.addClass("hprt-block--room-selected"):s.removeClass("hprt-block--room-selected")):s.removeClass("hprt-block--room-selected");var a=e.rooms[i];if(a&&a.b_has_room_inventory){var o=parseInt(n.val(),10),r=parseInt(a.b_blocks[0].b_nr_stays,10)+o-e.roomCountPerRoomID[a.b_id];n.find("option").each(function(){_i_("a9a:3910e429"),h(this).prop("disabled",this.value>r),_r_()}),h(".js-group-recommendation-reserve-btn").attr("disabled",!0)}else n.find("option").each(function(){_i_("a9a:7e9fbdbc"),h(this).prop("disabled",!1),_r_()}),h(".js-group-recommendation-reserve-btn").attr("disabled",!1);_r_()}.bind(this)),_r_()}}),_r_()}),B.define("hotel/rooms-table",function(e){_i_("a9a:cd78139a");var s=e("jquery"),l=e("hotel/store"),r=e("booking-sticker"),_=e("et"),c=e("hotel/redux/actionTypes"),t=!1,n=!1;function a(){_i_("a9a:cfd21258");var e=new r,t=new r,a=new r,o={initialZIndex:180};B.env.b_hp_sticky_offset&&(o.initialOffset=B.env.b_hp_sticky_offset),B.events.once("fake-header-loaded",function(){_i_("a9a:9e0a1fba"),n||(n=!0,e.init(".hprt-table thead",".hprt-table",o),a.init(".fake-header.js-fake-header","#hprt-table",{noStacking:!0,initialZIndex:o.initialZIndex}),t.init(".js-hprt-reservation-summary > .reserve-block-js","#hprt-table",o)),_r_()}),_r_()}"hotel"===B.env.b_action&&B.env.b_bookings_owned&&B.env.b_rooms_available_and_soldout&&(0<s(".hprt-table tbody tr").length&&(a(),l.subscribe(function(){_i_("a9a:86af2c2c"),window.setTimeout(r.update,5),window.setTimeout(r.update,10),_r_()}),2===r.stickedElements.length&&(t=!0)),B.events.on("main-tab-opened",function(){_i_("a9a:8a28ab5f"),t||a(),_r_()})),e("hotel/rooms-table/reserve-button-tooltip"),e("hotel/rooms-table/filters/filters-handler"),s(".hprt-filter-button").click(function(e){_i_("a9a:735cd02e");var t=l.getState(),a=!1;s(this).hasClass("hprt-is-filter-clicked")?(s(this).removeClass("hprt-is-filter-clicked"),a=!0):s(this).addClass("hprt-is-filter-clicked");for(var o=0;o<t.roomsTable.rooms.length;o++)for(var r=t.roomsTable.rooms[o].b_blocks,n=0;n<r.length;n++)switch(s(this).attr("data-filter-type")){case"occupancy":s(this).attr("data-filter-value")!=r[n].b_max_persons&&s("[data-block-id='"+r[n].b_block_id+"']").each(function(e){_i_("a9a:bfc9090c"),a?s(this).find(".can-be-filtered").removeClass("hprt-greyout-occupancy"):s(this).find(".can-be-filtered").addClass("hprt-greyout-occupancy"),_r_()});break;case"meal":var i=s("#hprt-bundle-filter").attr("data-filters-applied")?s("#hprt-bundle-filter").attr("data-filters-applied").split(","):[];a?-1<(_=i.indexOf(s(this).attr("data-filter-value")))&&i.splice(_,1):i.includes(s(this).attr("data-filter-value"))||i.push(s(this).attr("data-filter-value")),0<i.length&&(!r[n].b_mealplan_included_name&&!i.includes("room")||r[n].b_mealplan_included_name&&!i.includes(r[n].b_mealplan_included_name))?s("[data-block-id='"+r[n].b_block_id+"']").each(function(e){_i_("a9a:bab5d2ba"),s(this).find(".can-be-filtered").addClass("hprt-greyout-meal"),_r_()}):s("[data-block-id='"+r[n].b_block_id+"']").each(function(e){_i_("a9a:4d016975"),s(this).find(".can-be-filtered").removeClass("hprt-greyout-meal"),_r_()}),s("#hprt-bundle-filter").attr("data-filters-applied",i.join());break;case"policy":var _;i=s("#hprt-bundle-filter").attr("data-policy-filters-applied")?s("#hprt-bundle-filter").attr("data-policy-filters-applied").split(","):[],a?-1<(_=i.indexOf(s(this).attr("data-filter-value")))&&i.splice(_,1):i.includes(s(this).attr("data-filter-value"))||i.push(s(this).attr("data-filter-value")),0<i.length&&("not_refundable_anymore"==r[n].b_cancellation_type&&!i.includes("non_refundable")||"not_refundable_anymore"!=r[n].b_cancellation_type&&!i.includes(r[n].b_cancellation_type))?s("[data-block-id='"+r[n].b_block_id+"']").each(function(e){_i_("a9a:37828a65"),s(this).find(".can-be-filtered").addClass("hprt-greyout-policy"),_r_()}):s("[data-block-id='"+r[n].b_block_id+"']").each(function(e){_i_("a9a:7aee62a9"),s(this).find(".can-be-filtered").removeClass("hprt-greyout-policy"),_r_()}),s("#hprt-bundle-filter").attr("data-policy-filters-applied",i.join())}_r_()}),s("#hprt-form").submit(function(e){var t;_i_("a9a:e81ba8dc");var a=l.getState();if(!a.roomsTable.js_selection.roomCount||!a.roomsTable.rooms)return _r_();t=[];for(var o=[],r=0;r<a.roomsTable.rooms.length;r++){for(var n=-1,i=0;i<a.roomsTable.rooms[r].b_blocks.length;i++)a.roomsTable.js_selection.blocks[a.roomsTable.rooms[r].b_blocks[i].b_block_id]&&(n=i);a.roomsTable.rooms[r].b_blocks.some(function(e){return _i_("a9a:3e86e245"),_r_(a.roomsTable.js_selection.blocks[e.b_block_id])})&&t.push(r+1),-1!=n&&o.push(n+1)}t.length&&s(this).find("input[name=rt_pos_selected]").val(t.join("_")),o.length&&s(this).find("input[name=rt_pos_selected_within_room]").val(o.join("_")),s("select[name^='nr_rooms_']").filter(function(){return _i_("a9a:f0558075"),_r_(0==s(this).val())}).attr("disabled",!0),_.track("BHDTJdReQLOLOLOOTdZBSeFdBfUPcC")&&l.dispatch({type:c.SUBMIT_FORM_WITH_ROOMS}),_r_()}),_r_()}),B.define("component/hotel/new-rooms-table/summary/genius-room-upgrade",function(e,t,a){_i_("a9a:69c9c2da");var o=e("component"),r=e("hotel/store");a.exports=o.extend({init:function(){_i_("a9a:f177a66f"),r.subscribe(function(){_i_("a9a:4659c403");var e=r.getState().roomsTable.js_selection,a=0,o=0;1<=e.roomCount?($.each(e.blocks,function(e,t){_i_("a9a:7e4b44ec"),t.b_genius_free_room_upgrade?a=1:o=1,_r_()}),a&&o?this.$el.html('<div class="urgency_message_red"><strong>'+B.jstmpl.translations("genius_free_room_upgrade_rt_multiple")+"</strong></div>"):this.$el.html("")):this.$el.html(""),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/free-taxi",function(i,e,t){_i_("a9a:894ab8af");var a=i("component");t.exports=a.extend({init:function(){_i_("a9a:7d46933e");var e=this.$el.data(),a=+e.ttv,t=e.currencyCode,o=B.env.b_selected_currency,r=B.debug("trips_promotions");if(isNaN(a)||"string"!=typeof t||t.length<1||t!==o)return r.log(["Nothing to see here.","ttv = "+a,"currencyCode = "+t,"pageCurrencyCode = "+o].join(" ")),_r_();var n=i("hotel/store");n.subscribe(function(){_i_("a9a:8e107fb2");var e=n.getState().roomsTable.js_selection,t=e.totalPrice;a<t&&!function(e){_i_("a9a:a704e78d");var t=e.blockIDs[0]||"";return _r_(/^bbasic_/i.test(t))}(e)&&1<e.roomCount?this.$el.children().css("display","block").attr("aria-hidden","false"):this.$el.children().css("display","none").attr("aria-hidden","true"),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("hotel/rooms-table/filters/filters-handler",function(e){_i_("a9a:d84e3e2f");var n,i=e("jquery"),_=e("hotel/store"),s=e("hotel/redux/actionTypes"),l=!1,c=i("#hprt-table"),d="bui-u-hidden";_.subscribe(function(){_i_("a9a:9123e36a");var e=_.getState().roomsTable;if(s.UPDATE_BLOCKS_FILTERS===e.lastAction){n=c.find(".js-rt-block-row");var t=e.filters.matchingBlocksIds,a=Object.values(e.js_selection.roomIDs);if(!a||!t.length)return n.removeClass(d),_r_();if(a&&a.length){var o=a.reduce(function(e,t){return _i_("a9a:03bfd822"),_r_(e.concat(function(t){_i_("a9a:a28242b9");var e=_.getState().roomsTable.rooms;if(!e)return _r_();return _r_(e.filter(function(e){return _i_("a9a:0cac6c46"),_r_(e.b_id===Number(t))}).reduce(function(e,t){return _i_("a9a:1540a307"),_r_(e.concat(t.b_blocks.map(function(e){return _i_("a9a:903b79da"),_r_(e.b_block_id)})))},[]))}(t)))},[]);t=t.concat(o)}var r=n.filter(function(){_i_("a9a:42c6f2db");var e=i(this).data("block-id");return _r_(-1===t.indexOf(e))});n.filter(function(){_i_("a9a:8f7b7679");var e=i(this).data("block-id");return _r_(0<=t.indexOf(e))}).removeClass(d),r.addClass(d)}else s.CLEAR_BLOCKS_FILTERS===e.lastAction?(n=c.find(".js-rt-block-row")).removeClass(d):s.ADD_TPI_ROOMS===e.lastAction&&(l||(l=!0));_r_()}),_r_()}),booking.jstmpl("rooms_table_unit_type_filter",function(){_i_("a9a:2f7b7425");var _=['\n    <div>\n        <div class="bui-group bui-group--inline bui-group--large" role="group">\n        ',"\n            ",'\n            <div class="bui-form__group">\n               <label class="bui-checkbox">\n                 <input\n                    type="checkbox"\n                    class="bui-checkbox__input js-hprt-filter-option"\n                    value="','"\n                    ',"checked",'\n                 />\n                 <span class="bui-checkbox__label">\n                   ',"\n                       ","/roomtype/{fe_unit_type_id}/filter_name_generic","\n                   ","/roomtype/{fe_unit_type_id}/filter_name","\n                 </span>\n               </label>\n            </div>\n        ","\n        </div>\n        ",'\n            <div class="rt-filter__clear-filters-banner">\n                ',"/private/bh_gwe_pp_rt_unit_type_filter_clear_banner/name",'\n                <a href="#" id="js-hprt-filter-clear-btn">\n                    ',"/private/bh_gwe_pp_rt_unit_type_filter_clear_banner_cta/name","\n                </a>\n            </div>\n        ","\n    </div>\n"],s=["filter_options","fe_filter_value","fe_filter_checked","selected_filters_count"];return _r_(function(e){_i_("a9a:84ca04c2");var t="",a=this.fn;t+=_[0];var o=a.MC(s[0])||[];e.unshift({fe_filter_option:null});for(var r,n=1,i=o.length;n<=i;n++)e[0].fe_filter_option=r=o[n-1],t+=_[1],a.MN("fe_unit_type_id",a.MG((r||{}).room_type_id)),t+=_[1],a.MN("fe_filter_value",a.MG((r||{}).value)),t+=_[1],a.MN("fe_filter_checked",a.MG((r||{}).selected)),t+=[_[2],a.F.entities(a.MC(s[1])),_[3]].join(""),a.MD(s[2])&&(t+=_[4]),t+=_[5],a.MJ(a.MB(s[1])+""=="room")?t+=[_[6],a.ME(_[7],a.MB,a.MN,null),_[8]].join(""):t+=[_[6],a.ME(_[9],a.MB,a.MN,null),_[8]].join(""),t+=_[10];return e.shift(),t+=_[11],a.MJ(0<a.MB(s[3]))&&(t+=[_[12],a.ME(_[13],a.MB,a.MN,null),_[14],a.ME(_[15],a.MB,a.MN,null),_[16]].join("")),t+=_[17],_r_(t)})}()),B.define("component/hotel/rooms-table/filters/unit-type",function(e,t,a){_i_("a9a:285db851");var _=e("jquery"),s=e("hotel/store"),l=e("hotel/redux/actionTypes"),o=[0,20,36,10,9,23,8,24,7,4,13];function r(e){var t;_i_("a9a:2d265b18");var a={};for(t=0;t<e.length;t++){var o=e[t],r=o.b_blocks,n=o.b_roomtype_id,i=n;if(c(n)&&(i="room"),void 0===a[i]&&(a[i]={name:"unit-type-"+i,value:i.toString(),room_type_id:n,blocksIds:[],num_units:0,selected:!1}),r.length){for(var _,s=0;s<r.length;s++)(_=r[s]).b_block_id&&a[i].blocksIds.push(_.b_block_id);o.isAvailable&&(a[i].num_units+=r[0].b_nr_stays)}}var l=Object.values(a);return l.sort(function(e,t){return _i_("a9a:ade9267b"),_r_(t.num_units-e.num_units)}),_r_(l)}function c(e){if(_i_("a9a:573896b0"),null===e)return _r_(!0);return _r_(-1!==o.indexOf(e))}a.exports=e("component/reactive").extend({template:"rooms_table_unit_type_filter",initialState:{filter_options:[],selected_filters_count:0},initialize:function(){_i_("a9a:cf8a8dd6");var e=r(s.getState().roomsTable.rooms);this.setState({filter_options:e}),this.$el.on("change",".js-hprt-filter-option",this._handleFilterOptionChange.bind(this)),this.$el.on("click","#js-hprt-filter-clear-btn",this._handleClearFilterClicked.bind(this)),s.subscribe(this._onHotelPageStoreChange.bind(this)),_r_()},_onHotelPageStoreChange:function(){_i_("a9a:90c5f5fe");var e=s.getState().roomsTable;if(l.ADD_TPI_ROOMS===e.lastAction){var t=r(e.rooms);this.setState({filter_options:t})}_r_()},_handleFilterOptionChange:function(e){_i_("a9a:20bcc6c4");var t=_(e.target),a=t.val(),o=t.is(":checked"),r=[],n=[],i=this.getState().filter_options.map(function(e){return _i_("a9a:8ef33fa3"),e.value===a&&(e.selected=o),e.selected&&(r=r.concat(e.blocksIds),n.push(e.name)),_r_(e)});s.dispatch({type:l.UPDATE_BLOCKS_FILTERS,selectedFilters:n,matchingBlocksIds:r}),this.setState({filter_options:i,selected_filters_count:n.length}),_r_()},_handleClearFilterClicked:function(e){_i_("a9a:f8fad248"),e.preventDefault(),s.dispatch({type:l.CLEAR_BLOCKS_FILTERS});var t=r(s.getState().roomsTable.rooms);this.setState({filter_options:t,selected_filters_count:0}),_r_()}}),_r_()}),B.require("hotel/rooms-table"),_r_();